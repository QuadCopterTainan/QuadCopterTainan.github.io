!function(){(function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.4.4";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g in a)if(x.has(a,g)&&b.call(d,a[g],g,a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?null:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var C=function(a,b,c,d){var e={},f=B(b||x.identity);return y(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};x.groupBy=function(a,b,c){return C(a,b,c,function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)})},x.countBy=function(a,b,c){return C(a,b,c,function(a,b){x.has(a,b)||(a[b]=0),a[b]++})},x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return y(a,function(a){x.isArray(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(i.apply(d,arguments))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=h.call(arguments),b=x.max(x.pluck(a,"length")),c=new Array(b),d=0;b>d;d++)c[d]=x.pluck(a,""+d);return c},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f},x.bind=function(a,b){if(a.bind===w&&w)return w.apply(a,h.call(arguments,1));var c=h.call(arguments,2);return function(){return a.apply(b,c.concat(h.call(arguments)))}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);return 0===b.length&&(b=x.functions(a)),y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},x.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&(b[b.length]=c);return b},x.values=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push(a[c]);return b},x.pairs=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push([c,a[c]]);return b},x.invert=function(a){var b={};for(var c in a)x.has(a,c)&&(b[a[c]]=c);return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var E=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if("[object Array]"==e){if(g=a.length,h=g==b.length)for(;g--&&(h=E(a[g],b[g],c,d)););}else{var i=a.constructor,k=b.constructor;if(i!==k&&!(x.isFunction(i)&&i instanceof i&&x.isFunction(k)&&k instanceof k))return!1;for(var l in a)if(x.has(a,l)&&(g++,!(h=x.has(b,l)&&E(a[l],b[l],c,d))))break;if(h){for(l in b)if(x.has(b,l)&&!g--)break;h=!g}}return c.pop(),d.pop(),h};x.isEqual=function(a,b){return E(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(a),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};F.unescape=x.invert(F.escape);var G={escape:new RegExp("["+x.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(F.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(G[a],function(b){return F[a][b]})}}),x.result=function(a,b){if(null==a)return null;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),L.call(this,c.apply(x,a))}})};var H=0;x.uniqueId=function(a){var b=++H+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||I).source,(c.interpolate||I).source,(c.evaluate||I).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(K,function(a){return"\\"+J[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var L=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],L.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return L.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),define("underscore",function(a){return function(){var b;return b||a._}}(this)),function(a,b){function c(a){var b=a.length,c=ib.type(a);return ib.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){var b=xb[a]={};return ib.each(a.match(kb)||[],function(a,c){b[c]=!0}),b}function e(a,c,d,e){if(ib.acceptData(a)){var f,g,h=ib.expando,i="string"==typeof c,j=a.nodeType,k=j?ib.cache:a,l=j?a[h]:a[h]&&h;if(l&&k[l]&&(e||k[l].data)||!i||d!==b)return l||(j?a[h]=l=_.pop()||ib.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=ib.noop)),("object"==typeof c||"function"==typeof c)&&(e?k[l]=ib.extend(k[l],c):k[l].data=ib.extend(k[l].data,c)),f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[ib.camelCase(c)]=d),i?(g=f[c],null==g&&(g=f[ib.camelCase(c)])):g=f,g}}function f(a,b,c){if(ib.acceptData(a)){var d,e,f,g=a.nodeType,i=g?ib.cache:a,j=g?a[ib.expando]:ib.expando;if(i[j]){if(b&&(f=c?i[j]:i[j].data)){ib.isArray(b)?b=b.concat(ib.map(b,ib.camelCase)):b in f?b=[b]:(b=ib.camelCase(b),b=b in f?[b]:b.split(" "));for(d=0,e=b.length;e>d;d++)delete f[b[d]];if(!(c?h:ib.isEmptyObject)(f))return}(c||(delete i[j].data,h(i[j])))&&(g?ib.cleanData([a],!0):ib.support.deleteExpando||i!=i.window?delete i[j]:i[j]=null)}}}function g(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(zb,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:yb.test(d)?ib.parseJSON(d):d}catch(f){}ib.data(a,c,d)}else d=b}return d}function h(a){var b;for(b in a)if(("data"!==b||!ib.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function i(){return!0}function j(){return!1}function k(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function l(a,b,c){if(b=b||0,ib.isFunction(b))return ib.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return ib.grep(a,function(a){return a===b===c});if("string"==typeof b){var d=ib.grep(a,function(a){return 1===a.nodeType});if(Rb.test(b))return ib.filter(b,d,!c);b=ib.filter(b,d)}return ib.grep(a,function(a){return ib.inArray(a,b)>=0===c})}function m(a){var b=Ub.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function n(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function o(a){var b=a.getAttributeNode("type");return a.type=(b&&b.specified)+"/"+a.type,a}function p(a){var b=ec.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function q(a,b){for(var c,d=0;null!=(c=a[d]);d++)ib._data(c,"globalEval",!b||ib._data(b[d],"globalEval"))}function r(a,b){if(1===b.nodeType&&ib.hasData(a)){var c,d,e,f=ib._data(a),g=ib._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)ib.event.add(b,c,h[c][d])}g.data&&(g.data=ib.extend({},g.data))}}function s(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ib.support.noCloneEvent&&b[ib.expando]){e=ib._data(b);for(d in e.events)ib.removeEvent(b,d,e.handle);b.removeAttribute(ib.expando)}"script"===c&&b.text!==a.text?(o(b).text=a.text,p(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ib.support.html5Clone&&a.innerHTML&&!ib.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&bc.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function t(a,c){var d,e,f=0,g=typeof a.getElementsByTagName!==V?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==V?a.querySelectorAll(c||"*"):b;if(!g)for(g=[],d=a.childNodes||a;null!=(e=d[f]);f++)!c||ib.nodeName(e,c)?g.push(e):ib.merge(g,t(e,c));return c===b||c&&ib.nodeName(a,c)?ib.merge([a],g):g}function u(a){bc.test(a.type)&&(a.defaultChecked=a.checked)}function v(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=yc.length;e--;)if(b=yc[e]+c,b in a)return b;return d}function w(a,b){return a=b||a,"none"===ib.css(a,"display")||!ib.contains(a.ownerDocument,a)}function x(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ib._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&w(d)&&(f[g]=ib._data(d,"olddisplay",B(d.nodeName)))):f[g]||(e=w(d),(c&&"none"!==c||!e)&&ib._data(d,"olddisplay",e?c:ib.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function y(a,b,c){var d=rc.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function z(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ib.css(a,c+xc[f],!0,e)),d?("content"===c&&(g-=ib.css(a,"padding"+xc[f],!0,e)),"margin"!==c&&(g-=ib.css(a,"border"+xc[f]+"Width",!0,e))):(g+=ib.css(a,"padding"+xc[f],!0,e),"padding"!==c&&(g+=ib.css(a,"border"+xc[f]+"Width",!0,e)));return g}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=kc(a),g=ib.support.boxSizing&&"border-box"===ib.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=lc(a,b,f),(0>e||null==e)&&(e=a.style[b]),sc.test(e))return e;d=g&&(ib.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a){var b=W,c=uc[a];return c||(c=C(a,b),"none"!==c&&c||(jc=(jc||ib("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(jc[0].contentWindow||jc[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=C(a,b),jc.detach()),uc[a]=c),c}function C(a,b){var c=ib(b.createElement(a)).appendTo(b.body),d=ib.css(c[0],"display");return c.remove(),d}function D(a,b,c,d){var e;if(ib.isArray(b))ib.each(b,function(b,e){c||Ac.test(a)?d(a,e):D(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ib.type(b))d(a,b);else for(e in b)D(a+"["+e+"]",b[e],c,d)}function E(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(kb)||[];if(ib.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function F(a,b,c,d){function e(h){var i;return f[h]=!0,ib.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Rc;return e(b.dataTypes[0])||!f["*"]&&e("*")}function G(a,c){var d,e,f=ib.ajaxSettings.flatOptions||{};for(e in c)c[e]!==b&&((f[e]?a:d||(d={}))[e]=c[e]);return d&&ib.extend(!0,a,d),a}function H(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(h in k)h in d&&(c[k[h]]=d[h]);for(;"*"===j[0];)j.shift(),f===b&&(f=a.mimeType||c.getResponseHeader("Content-Type"));if(f)for(h in i)if(i[h]&&i[h].test(f)){j.unshift(h);break}if(j[0]in d)g=j[0];else{for(h in d){if(!j[0]||a.converters[h+" "+j[0]]){g=h;break}e||(e=h)}g=g||e}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function I(a,b){var c,d,e,f,g={},h=0,i=a.dataTypes.slice(),j=i[0];if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i[1])for(e in a.converters)g[e.toLowerCase()]=a.converters[e];for(;d=i[++h];)if("*"!==d){if("*"!==j&&j!==d){if(e=g[j+" "+d]||g["* "+d],!e)for(c in g)if(f=c.split(" "),f[1]===d&&(e=g[j+" "+f[0]]||g["* "+f[0]])){e===!0?e=g[c]:g[c]!==!0&&(d=f[0],i.splice(h--,0,d));break}if(e!==!0)if(e&&a["throws"])b=e(b);else try{b=e(b)}catch(k){return{state:"parsererror",error:e?k:"No conversion from "+j+" to "+d}}}j=d}return{state:"success",data:b}}function J(){try{return new a.XMLHttpRequest}catch(b){}}function K(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function L(){return setTimeout(function(){$c=b}),$c=ib.now()}function M(a,b){ib.each(b,function(b,c){for(var d=(ed[b]||[]).concat(ed["*"]),e=0,f=d.length;f>e;e++)if(d[e].call(a,b,c))return})}function N(a,b,c){var d,e,f=0,g=dd.length,h=ib.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$c||L(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ib.extend({},b),opts:ib.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$c||L(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ib.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(O(k,j.opts.specialEasing);g>f;f++)if(d=dd[f].call(j,a,k,j.opts))return d;return M(j,k),ib.isFunction(j.opts.start)&&j.opts.start.call(a,j),ib.fx.timer(ib.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function O(a,b){var c,d,e,f,g;for(e in a)if(d=ib.camelCase(e),f=b[d],c=a[e],ib.isArray(c)&&(f=c[1],c=a[e]=c[0]),e!==d&&(a[d]=c,delete a[e]),g=ib.cssHooks[d],g&&"expand"in g){c=g.expand(c),delete a[d];for(e in c)e in a||(a[e]=c[e],b[e]=f)}else b[d]=f}function P(a,b,c){var d,e,f,g,h,i,j,k,l,m=this,n=a.style,o={},p=[],q=a.nodeType&&w(a);c.queue||(k=ib._queueHooks(a,"fx"),null==k.unqueued&&(k.unqueued=0,l=k.empty.fire,k.empty.fire=function(){k.unqueued||l()}),k.unqueued++,m.always(function(){m.always(function(){k.unqueued--,ib.queue(a,"fx").length||k.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],"inline"===ib.css(a,"display")&&"none"===ib.css(a,"float")&&(ib.support.inlineBlockNeedsLayout&&"inline"!==B(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",ib.support.shrinkWrapBlocks||m.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(e in b)if(g=b[e],ad.exec(g)){if(delete b[e],i=i||"toggle"===g,g===(q?"hide":"show"))continue;p.push(e)}if(f=p.length){h=ib._data(a,"fxshow")||ib._data(a,"fxshow",{}),"hidden"in h&&(q=h.hidden),i&&(h.hidden=!q),q?ib(a).show():m.done(function(){ib(a).hide()}),m.done(function(){var b;ib._removeData(a,"fxshow");for(b in o)ib.style(a,b,o[b])});for(e=0;f>e;e++)d=p[e],j=m.createTween(d,q?h[d]:0),o[d]=h[d]||ib.style(a,d),d in h||(h[d]=j.start,q&&(j.end=j.start,j.start="width"===d||"height"===d?1:0))}}function Q(a,b,c,d,e){return new Q.prototype.init(a,b,c,d,e)}function R(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=xc[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function S(a){return ib.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var T,U,V=typeof b,W=a.document,X=a.location,Y=a.jQuery,Z=a.$,$={},_=[],ab="1.9.1",bb=_.concat,cb=_.push,db=_.slice,eb=_.indexOf,fb=$.toString,gb=$.hasOwnProperty,hb=ab.trim,ib=function(a,b){return new ib.fn.init(a,b,U)},jb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,kb=/\S+/g,lb=/^[\s﻿ ]+|[\s﻿ ]+$/g,mb=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,nb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ob=/^[\],:{}\s]*$/,pb=/(?:^|:|,)(?:\s*\[)+/g,qb=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rb=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,sb=/^-ms-/,tb=/-([\da-z])/gi,ub=function(a,b){return b.toUpperCase()},vb=function(a){(W.addEventListener||"load"===a.type||"complete"===W.readyState)&&(wb(),ib.ready())},wb=function(){W.addEventListener?(W.removeEventListener("DOMContentLoaded",vb,!1),a.removeEventListener("load",vb,!1)):(W.detachEvent("onreadystatechange",vb),a.detachEvent("onload",vb))};ib.fn=ib.prototype={jquery:ab,constructor:ib,init:function(a,c,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:mb.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof ib?c[0]:c,ib.merge(this,ib.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:W,!0)),nb.test(e[1])&&ib.isPlainObject(c))for(e in c)ib.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}if(f=W.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=W,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ib.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),ib.makeArray(a,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return db.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){var b=ib.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ib.each(this,a,b)},ready:function(a){return ib.ready.promise().done(a),this},slice:function(){return this.pushStack(db.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},map:function(a){return this.pushStack(ib.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:cb,sort:[].sort,splice:[].splice},ib.fn.init.prototype=ib.fn,ib.extend=ib.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||ib.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(ib.isPlainObject(d)||(c=ib.isArray(d)))?(c?(c=!1,g=a&&ib.isArray(a)?a:[]):g=a&&ib.isPlainObject(a)?a:{},h[e]=ib.extend(k,g,d)):d!==b&&(h[e]=d));return h},ib.extend({noConflict:function(b){return a.$===ib&&(a.$=Z),b&&a.jQuery===ib&&(a.jQuery=Y),ib},isReady:!1,readyWait:1,holdReady:function(a){a?ib.readyWait++:ib.ready(!0)},ready:function(a){if(a===!0?!--ib.readyWait:!ib.isReady){if(!W.body)return setTimeout(ib.ready);ib.isReady=!0,a!==!0&&--ib.readyWait>0||(T.resolveWith(W,[ib]),ib.fn.trigger&&ib(W).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===ib.type(a)},isArray:Array.isArray||function(a){return"array"===ib.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?$[fb.call(a)]||"object":typeof a},isPlainObject:function(a){if(!a||"object"!==ib.type(a)||a.nodeType||ib.isWindow(a))return!1;try{if(a.constructor&&!gb.call(a,"constructor")&&!gb.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||gb.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||W;var d=nb.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ib.buildFragment([a],b,e),e&&ib(e).remove(),ib.merge([],d.childNodes))},parseJSON:function(b){return a.JSON&&a.JSON.parse?a.JSON.parse(b):null===b?b:"string"==typeof b&&(b=ib.trim(b),b&&ob.test(b.replace(qb,"@").replace(rb,"]").replace(pb,"")))?new Function("return "+b)():void ib.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||ib.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&ib.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(sb,"ms-").replace(tb,ub)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:hb&&!hb.call("﻿ ")?function(a){return null==a?"":hb.call(a)}:function(a){return null==a?"":(a+"").replace(lb,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ib.merge(d,"string"==typeof a?[a]:a):cb.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(eb)return eb.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(i[i.length]=e);return bb.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(f=a[c],c=a,a=f),ib.isFunction(a)?(d=db.call(arguments,2),e=function(){return a.apply(c||this,d.concat(db.call(arguments)))},e.guid=a.guid=a.guid||ib.guid++,e):b},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===ib.type(d)){f=!0;for(i in d)ib.access(a,c,i,d[i],!0,g,h)}else if(e!==b&&(f=!0,ib.isFunction(e)||(h=!0),k&&(h?(c.call(a,e),c=null):(k=c,c=function(a,b,c){return k.call(ib(a),c)})),c))for(;j>i;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)));return f?a:k?c.call(a):j?c(a[0],d):g},now:function(){return(new Date).getTime()}}),ib.ready.promise=function(b){if(!T)if(T=ib.Deferred(),"complete"===W.readyState)setTimeout(ib.ready);else if(W.addEventListener)W.addEventListener("DOMContentLoaded",vb,!1),a.addEventListener("load",vb,!1);else{W.attachEvent("onreadystatechange",vb),a.attachEvent("onload",vb);var c=!1;try{c=null==a.frameElement&&W.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!ib.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}wb(),ib.ready()}}()}return T.promise(b)},ib.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){$["[object "+b+"]"]=b.toLowerCase()}),U=ib(W);var xb={};ib.Callbacks=function(a){a="string"==typeof a?xb[a]||d(a):ib.extend({},a);var c,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(e=a.memory&&b,f=!0,h=i||0,i=0,g=j.length,c=!0;j&&g>h;h++)if(j[h].apply(b[0],b[1])===!1&&a.stopOnFalse){e=!1;break}c=!1,j&&(k?k.length&&l(k.shift()):e?j=[]:m.disable())
},m={add:function(){if(j){var b=j.length;!function d(b){ib.each(b,function(b,c){var e=ib.type(c);"function"===e?a.unique&&m.has(c)||j.push(c):c&&c.length&&"string"!==e&&d(c)})}(arguments),c?g=j.length:e&&(i=b,l(e))}return this},remove:function(){return j&&ib.each(arguments,function(a,b){for(var d;(d=ib.inArray(b,j,d))>-1;)j.splice(d,1),c&&(g>=d&&g--,h>=d&&h--)}),this},has:function(a){return a?ib.inArray(a,j)>-1:!(!j||!j.length)},empty:function(){return j=[],this},disable:function(){return j=k=e=b,this},disabled:function(){return!j},lock:function(){return k=b,e||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],!j||f&&!k||(c?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m},ib.extend({Deferred:function(a){var b=[["resolve","done",ib.Callbacks("once memory"),"resolved"],["reject","fail",ib.Callbacks("once memory"),"rejected"],["notify","progress",ib.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ib.Deferred(function(c){ib.each(b,function(b,f){var g=f[0],h=ib.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&ib.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ib.extend(a,d):d}},e={};return d.pipe=d.then,ib.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=db.call(arguments),g=f.length,h=1!==g||a&&ib.isFunction(a.promise)?g:0,i=1===h?a:ib.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?db.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&ib.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),ib.support=function(){var b,c,d,e,f,g,h,i,j,k,l=W.createElement("div");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=l.getElementsByTagName("*"),d=l.getElementsByTagName("a")[0],!c||!d||!c.length)return{};f=W.createElement("select"),h=f.appendChild(W.createElement("option")),e=l.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b={getSetAttribute:"t"!==l.className,leadingWhitespace:3===l.firstChild.nodeType,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:!!e.value,optSelected:h.selected,enctype:!!W.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==W.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===W.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},e.checked=!0,b.noCloneChecked=e.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!h.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}e=W.createElement("input"),e.setAttribute("value",""),b.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),b.radioValue="t"===e.value,e.setAttribute("checked","t"),e.setAttribute("name","t"),g=W.createDocumentFragment(),g.appendChild(e),b.appendChecked=e.checked,b.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,l.attachEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})l.setAttribute(i="on"+k,"t"),b[k+"Bubbles"]=i in a||l.attributes[i].expando===!1;return l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===l.style.backgroundClip,ib(function(){var c,d,e,f="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",g=W.getElementsByTagName("body")[0];g&&(c=W.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=l.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",j=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=j&&0===e[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===l.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==g.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(l,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(l,null)||{width:"4px"}).width,d=l.appendChild(W.createElement("div")),d.style.cssText=l.style.cssText=f,d.style.marginRight=d.style.width="0",l.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof l.style.zoom!==V&&(l.innerHTML="",l.style.cssText=f+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==l.offsetWidth,b.inlineBlockNeedsLayout&&(g.style.zoom=1)),g.removeChild(c),c=l=e=d=null)}),c=f=g=h=d=e=null,b}();var yb=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,zb=/([A-Z])/g;ib.extend({cache:{},expando:"jQuery"+(ab+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?ib.cache[a[ib.expando]]:a[ib.expando],!!a&&!h(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return f(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return f(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&ib.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),ib.fn.extend({data:function(a,c){var d,e,f=this[0],h=0,i=null;if(a===b){if(this.length&&(i=ib.data(f),1===f.nodeType&&!ib._data(f,"parsedAttrs"))){for(d=f.attributes;h<d.length;h++)e=d[h].name,e.indexOf("data-")||(e=ib.camelCase(e.slice(5)),g(f,e,i[e]));ib._data(f,"parsedAttrs",!0)}return i}return"object"==typeof a?this.each(function(){ib.data(this,a)}):ib.access(this,function(c){return c===b?f?g(f,a,ib.data(f,a)):null:void this.each(function(){ib.data(this,a,c)})},null,c,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){ib.removeData(this,a)})}}),ib.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=ib._data(a,b),c&&(!d||ib.isArray(c)?d=ib._data(a,b,ib.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=ib.queue(a,b),d=c.length,e=c.shift(),f=ib._queueHooks(a,b),g=function(){ib.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),f.cur=e,e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ib._data(a,c)||ib._data(a,c,{empty:ib.Callbacks("once memory").add(function(){ib._removeData(a,b+"queue"),ib._removeData(a,c)})})}}),ib.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?ib.queue(this[0],a):c===b?this:this.each(function(){var b=ib.queue(this,a,c);ib._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&ib.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ib.dequeue(this,a)})},delay:function(a,b){return a=ib.fx?ib.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=ib.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=ib._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var Ab,Bb,Cb=/[\t\r\n]/g,Db=/\r/g,Eb=/^(?:input|select|textarea|button|object)$/i,Fb=/^(?:a|area)$/i,Gb=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Hb=/^(?:checked|selected)$/i,Ib=ib.support.getSetAttribute,Jb=ib.support.input;ib.fn.extend({attr:function(a,b){return ib.access(this,ib.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ib.removeAttr(this,a)})},prop:function(a,b){return ib.access(this,ib.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ib.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(ib.isFunction(a))return this.each(function(b){ib(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(kb)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Cb," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");c.className=ib.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(ib.isFunction(a))return this.each(function(b){ib(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(kb)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Cb," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?ib.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return this.each(ib.isFunction(a)?function(c){ib(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var e,f=0,g=ib(this),h=b,i=a.match(kb)||[];e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else(c===V||"boolean"===c)&&(this.className&&ib._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ib._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Cb," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=ib.isFunction(a),this.each(function(c){var f,g=ib(this);1===this.nodeType&&(f=e?a.call(this,c,g.val()):a,null==f?f="":"number"==typeof f?f+="":ib.isArray(f)&&(f=ib.map(f,function(a){return null==a?"":a+""})),d=ib.valHooks[this.type]||ib.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,f,"value")!==b||(this.value=f))});if(f)return d=ib.valHooks[f.type]||ib.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&(c=d.get(f,"value"))!==b?c:(c=f.value,"string"==typeof c?c.replace(Db,""):null==c?"":c)}}}),ib.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(ib.support.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&ib.nodeName(c.parentNode,"optgroup"))){if(b=ib(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c=ib.makeArray(b);return ib(a).find("option").each(function(){this.selected=ib.inArray(ib(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attr:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return typeof a.getAttribute===V?ib.prop(a,c,d):(f=1!==h||!ib.isXMLDoc(a),f&&(c=c.toLowerCase(),e=ib.attrHooks[c]||(Gb.test(c)?Bb:Ab)),d===b?e&&f&&"get"in e&&null!==(g=e.get(a,c))?g:(typeof a.getAttribute!==V&&(g=a.getAttribute(c)),null==g?b:g):null!==d?e&&f&&"set"in e&&(g=e.set(a,d,c))!==b?g:(a.setAttribute(c,d+""),d):void ib.removeAttr(a,c))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(kb);if(f&&1===a.nodeType)for(;c=f[e++];)d=ib.propFix[c]||c,Gb.test(c)?!Ib&&Hb.test(c)?a[ib.camelCase("default-"+c)]=a[d]=!1:a[d]=!1:ib.attr(a,c,""),a.removeAttribute(Ib?c:d)},attrHooks:{type:{set:function(a,b){if(!ib.support.radioValue&&"radio"===b&&ib.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!ib.isXMLDoc(a),g&&(c=ib.propFix[c]||c,f=ib.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):Eb.test(a.nodeName)||Fb.test(a.nodeName)&&a.href?0:b}}}}),Bb={get:function(a,c){var d=ib.prop(a,c),e="boolean"==typeof d&&a.getAttribute(c),f="boolean"==typeof d?Jb&&Ib?null!=e:Hb.test(c)?a[ib.camelCase("default-"+c)]:!!e:a.getAttributeNode(c);return f&&f.value!==!1?c.toLowerCase():b},set:function(a,b,c){return b===!1?ib.removeAttr(a,c):Jb&&Ib||!Hb.test(c)?a.setAttribute(!Ib&&ib.propFix[c]||c,c):a[ib.camelCase("default-"+c)]=a[c]=!0,c}},Jb&&Ib||(ib.attrHooks.value={get:function(a,c){var d=a.getAttributeNode(c);return ib.nodeName(a,"input")?a.defaultValue:d&&d.specified?d.value:b},set:function(a,b,c){return ib.nodeName(a,"input")?void(a.defaultValue=b):Ab&&Ab.set(a,b,c)}}),Ib||(Ab=ib.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&("id"===c||"name"===c||"coords"===c?""!==d.value:d.specified)?d.value:b},set:function(a,c,d){var e=a.getAttributeNode(d);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d)),e.value=c+="","value"===d||c===a.getAttribute(d)?c:b}},ib.attrHooks.contenteditable={get:Ab.get,set:function(a,b,c){Ab.set(a,""===b?!1:b,c)}},ib.each(["width","height"],function(a,b){ib.attrHooks[b]=ib.extend(ib.attrHooks[b],{set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}})})),ib.support.hrefNormalized||(ib.each(["href","src","width","height"],function(a,c){ib.attrHooks[c]=ib.extend(ib.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null==d?b:d}})}),ib.each(["href","src"],function(a,b){ib.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}})),ib.support.style||(ib.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}}),ib.support.optSelected||(ib.propHooks.selected=ib.extend(ib.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),ib.support.enctype||(ib.propFix.enctype="encoding"),ib.support.checkOn||ib.each(["radio","checkbox"],function(){ib.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),ib.each(["radio","checkbox"],function(){ib.valHooks[this]=ib.extend(ib.valHooks[this],{set:function(a,b){return ib.isArray(b)?a.checked=ib.inArray(ib(a).val(),b)>=0:void 0}})});var Kb=/^(?:input|select|textarea)$/i,Lb=/^key/,Mb=/^(?:mouse|contextmenu)|click/,Nb=/^(?:focusinfocus|focusoutblur)$/,Ob=/^([^.]*)(?:\.(.+)|)$/;ib.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=ib._data(a);if(r){for(d.handler&&(j=d,d=j.handler,f=j.selector),d.guid||(d.guid=ib.guid++),(h=r.events)||(h=r.events={}),(l=r.handle)||(l=r.handle=function(a){return typeof ib===V||a&&ib.event.triggered===a.type?b:ib.event.dispatch.apply(l.elem,arguments)},l.elem=a),c=(c||"").match(kb)||[""],i=c.length;i--;)g=Ob.exec(c[i])||[],o=q=g[1],p=(g[2]||"").split(".").sort(),k=ib.event.special[o]||{},o=(f?k.delegateType:k.bindType)||o,k=ib.event.special[o]||{},m=ib.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&ib.expr.match.needsContext.test(f),namespace:p.join(".")},j),(n=h[o])||(n=h[o]=[],n.delegateCount=0,k.setup&&k.setup.call(a,e,p,l)!==!1||(a.addEventListener?a.addEventListener(o,l,!1):a.attachEvent&&a.attachEvent("on"+o,l))),k.add&&(k.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,m):n.push(m),ib.event.global[o]=!0;a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ib.hasData(a)&&ib._data(a);if(q&&(k=q.events)){for(b=(b||"").match(kb)||[""],j=b.length;j--;)if(h=Ob.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ib.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ib.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ib.event.remove(a,n+b[j],c,d,!0);ib.isEmptyObject(k)&&(delete q.handle,ib._removeData(a,"events"))}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||W],o=gb.call(c,"type")?c.type:c,p=gb.call(c,"namespace")?c.namespace.split("."):[];if(i=l=e=e||W,3!==e.nodeType&&8!==e.nodeType&&!Nb.test(o+ib.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),h=o.indexOf(":")<0&&"on"+o,c=c[ib.expando]?c:new ib.Event(o,"object"==typeof c&&c),c.isTrigger=!0,c.namespace=p.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:ib.makeArray(d,[c]),k=ib.event.special[o]||{},f||!k.trigger||k.trigger.apply(e,d)!==!1)){if(!f&&!k.noBubble&&!ib.isWindow(e)){for(j=k.delegateType||o,Nb.test(j+o)||(i=i.parentNode);i;i=i.parentNode)n.push(i),l=i;l===(e.ownerDocument||W)&&n.push(l.defaultView||l.parentWindow||a)}for(m=0;(i=n[m++])&&!c.isPropagationStopped();)c.type=m>1?j:k.bindType||o,g=(ib._data(i,"events")||{})[c.type]&&ib._data(i,"handle"),g&&g.apply(i,d),g=h&&i[h],g&&ib.acceptData(i)&&g.apply&&g.apply(i,d)===!1&&c.preventDefault();if(c.type=o,!(f||c.isDefaultPrevented()||k._default&&k._default.apply(e.ownerDocument,d)!==!1||"click"===o&&ib.nodeName(e,"a")||!ib.acceptData(e)||!h||!e[o]||ib.isWindow(e))){l=e[h],l&&(e[h]=null),ib.event.triggered=o;try{e[o]()}catch(q){}ib.event.triggered=b,l&&(e[h]=l)}return c.result}},dispatch:function(a){a=ib.event.fix(a);var c,d,e,f,g,h=[],i=db.call(arguments),j=(ib._data(this,"events")||{})[a.type]||[],k=ib.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=ib.event.handlers.call(this,a,j),c=0;(f=h[c++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,d=((ib.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),d!==b&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!=this;j=j.parentNode||this)if(1===j.nodeType&&(j.disabled!==!0||"click"!==a.type)){for(f=[],g=0;i>g;g++)e=c[g],d=e.selector+" ",f[d]===b&&(f[d]=e.needsContext?ib(d,this).index(j)>=0:ib.find(d,this,null,[j]).length),f[d]&&f.push(e);f.length&&h.push({elem:j,handlers:f})}return i<c.length&&h.push({elem:this,handlers:c.slice(i)}),h},fix:function(a){if(a[ib.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Mb.test(e)?this.mouseHooks:Lb.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ib.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||W),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(e=a.target.ownerDocument||W,f=e.documentElement,d=e.body,a.pageX=c.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},click:{trigger:function(){return ib.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0}},focus:{trigger:function(){if(this!==W.activeElement&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===W.activeElement&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ib.extend(new ib.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ib.event.trigger(e,null,b):ib.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ib.removeEvent=W.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===V&&(a[d]=null),a.detachEvent(d,c))},ib.Event=function(a,b){return this instanceof ib.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?i:j):this.type=a,b&&ib.extend(this,b),this.timeStamp=a&&a.timeStamp||ib.now(),void(this[ib.expando]=!0)):new ib.Event(a,b)},ib.Event.prototype={isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=i,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=i,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()}},ib.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){ib.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!ib.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ib.support.submitBubbles||(ib.event.special.submit={setup:function(){return ib.nodeName(this,"form")?!1:void ib.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=ib.nodeName(c,"input")||ib.nodeName(c,"button")?c.form:b;d&&!ib._data(d,"submitBubbles")&&(ib.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),ib._data(d,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ib.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return ib.nodeName(this,"form")?!1:void ib.event.remove(this,"._submit")}}),ib.support.changeBubbles||(ib.event.special.change={setup:function(){return Kb.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ib.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ib.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ib.event.simulate("change",this,a,!0)})),!1):void ib.event.add(this,"beforeactivate._change",function(a){var b=a.target;Kb.test(b.nodeName)&&!ib._data(b,"changeBubbles")&&(ib.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ib.event.simulate("change",this.parentNode,a,!0)}),ib._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ib.event.remove(this,"._change"),!Kb.test(this.nodeName)}}),ib.support.focusinBubbles||ib.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){ib.event.simulate(b,a.target,ib.event.fix(a),!0)};ib.event.special[b]={setup:function(){0===c++&&W.addEventListener(a,d,!0)},teardown:function(){0===--c&&W.removeEventListener(a,d,!0)}}}),ib.fn.extend({on:function(a,c,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(g in a)this.on(g,c,d,a[g],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=j;else if(!e)return this;return 1===f&&(h=e,e=function(a){return ib().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=ib.guid++)),this.each(function(){ib.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,ib(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=j),this.each(function(){ib.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){ib.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?ib.event.trigger(a,b,c,!0):void 0}}),function(a,b){function c(a){return ob.test(a+"")}function d(){var a,b=[];return a=function(c,d){return b.push(c+=" ")>y.cacheLength&&delete a[b.shift()],a[c]=d}}function e(a){return a[N]=!0,a}function f(a){var b=F.createElement("div");try{return a(b)}catch(c){return!1}finally{b=null}}function g(a,b,c,d){var e,f,g,h,i,j,k,n,o,p;if((b?b.ownerDocument||b:O)!==F&&E(b),b=b||F,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(!H&&!d){if(e=pb.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&L(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return Z.apply(c,$.call(b.getElementsByTagName(a),0)),c;if((g=e[3])&&P.getByClassName&&b.getElementsByClassName)return Z.apply(c,$.call(b.getElementsByClassName(g),0)),c}if(P.qsa&&!I.test(a)){if(k=!0,n=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=l(a),(k=b.getAttribute("id"))?n=k.replace(sb,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=nb.test(a)&&b.parentNode||b,p=j.join(",")}if(p)try{return Z.apply(c,$.call(o.querySelectorAll(p),0)),c}catch(q){}finally{k||b.removeAttribute("id")}}}return u(a.replace(gb,"$1"),b,c,d)}function h(a,b){var c=b&&a,d=c&&(~b.sourceIndex||W)-(~a.sourceIndex||W);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function i(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function j(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function k(a){return e(function(b){return b=+b,e(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(a,b){var c,d,e,f,h,i,j,k=T[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=y.preFilter;h;){(!c||(d=hb.exec(h)))&&(d&&(h=h.slice(d[0].length)||h),i.push(e=[])),c=!1,(d=jb.exec(h))&&(c=d.shift(),e.push({value:c,type:d[0].replace(gb," ")}),h=h.slice(c.length));for(f in y.filter)!(d=mb[f].exec(h))||j[f]&&!(d=j[f](d))||(c=d.shift(),e.push({value:c,type:f,matches:d}),h=h.slice(c.length));if(!c)break}return b?h.length:h?g.error(a):T(a,i).slice(0)}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=R++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=Q+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[N]||(b[N]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===x)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||x,i[1]===!0)return!0}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function q(a,b,c,d,f,g){return d&&!d[N]&&(d=q(d)),f&&!f[N]&&(f=q(f,g)),e(function(e,g,h,i){var j,k,l,m=[],n=[],o=g.length,q=e||t(b||"*",h.nodeType?[h]:h,[]),r=!a||!e&&b?q:p(q,m,a,h,i),s=c?f||(e?a:o||d)?[]:g:r;if(c&&c(r,s,h,i),d)for(j=p(s,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(e){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?_.call(e,l):m[k])>-1&&(e[j]=!(g[j]=l))}}else s=p(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):Z.apply(g,s)})}function r(a){for(var b,c,d,e=a.length,f=y.relative[a[0].type],g=f||y.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return _.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=y.relative[a[h].type])k=[n(o(k),c)];else{if(c=y.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!y.relative[a[d].type];d++);return q(h>1&&o(k),h>1&&m(a.slice(0,h-1)).replace(gb,"$1"),c,d>h&&r(a.slice(h,d)),e>d&&r(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function s(a,b){var c=0,d=b.length>0,f=a.length>0,h=function(e,h,i,j,k){var l,m,n,o=[],q=0,r="0",s=e&&[],t=null!=k,u=D,v=e||f&&y.find.TAG("*",k&&h.parentNode||h),w=Q+=null==u?1:Math.random()||.1;for(t&&(D=h!==F&&h,x=c);null!=(l=v[r]);r++){if(f&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}t&&(Q=w,x=++c)}d&&((l=!n&&l)&&q--,e&&s.push(l))}if(q+=r,d&&r!==q){for(m=0;n=b[m++];)n(s,o,h,i);if(e){if(q>0)for(;r--;)s[r]||o[r]||(o[r]=Y.call(j));o=p(o)}Z.apply(j,o),t&&!e&&o.length>0&&q+b.length>1&&g.uniqueSort(j)}return t&&(Q=w,D=u),s};return d?e(h):h}function t(a,b,c){for(var d=0,e=b.length;e>d;d++)g(a,b[d],c);return c}function u(a,b,c,d){var e,f,g,h,i,j=l(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&9===b.nodeType&&!H&&y.relative[f[1].type]){if(b=y.find.ID(g.matches[0].replace(ub,vb),b)[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=mb.needsContext.test(a)?0:f.length;e--&&(g=f[e],!y.relative[h=g.type]);)if((i=y.find[h])&&(d=i(g.matches[0].replace(ub,vb),nb.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return Z.apply(c,$.call(d,0)),c;break}}return B(a,j)(d,b,H,c,nb.test(a)),c}function v(){}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P={},Q=0,R=0,S=d(),T=d(),U=d(),V=typeof b,W=1<<31,X=[],Y=X.pop,Z=X.push,$=X.slice,_=X.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},ab="[\\x20\\t\\r\\n\\f]",bb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",cb=bb.replace("w","w#"),db="([*^$|!~]?=)",eb="\\["+ab+"*("+bb+")"+ab+"*(?:"+db+ab+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+cb+")|)|)"+ab+"*\\]",fb=":("+bb+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+eb.replace(3,8)+")*)|.*)\\)|)",gb=new RegExp("^"+ab+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ab+"+$","g"),hb=new RegExp("^"+ab+"*,"+ab+"*"),jb=new RegExp("^"+ab+"*([\\x20\\t\\r\\n\\f>+~])"+ab+"*"),kb=new RegExp(fb),lb=new RegExp("^"+cb+"$"),mb={ID:new RegExp("^#("+bb+")"),CLASS:new RegExp("^\\.("+bb+")"),NAME:new RegExp("^\\[name=['\"]?("+bb+")['\"]?\\]"),TAG:new RegExp("^("+bb.replace("w","w*")+")"),ATTR:new RegExp("^"+eb),PSEUDO:new RegExp("^"+fb),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ab+"*(even|odd|(([+-]|)(\\d*)n|)"+ab+"*(?:([+-]|)"+ab+"*(\\d+)|))"+ab+"*\\)|)","i"),needsContext:new RegExp("^"+ab+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ab+"*((?:-\\d)?\\d*)"+ab+"*\\)|)(?=[^-]|$)","i")},nb=/[ \t\r\n\f]*[+~]/,ob=/^[^{]+\{\s*\[native code/,pb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qb=/^(?:input|select|textarea|button)$/i,rb=/^h\d$/i,sb=/'|\\/g,tb=/\=[ \t\r\n\f]*([^'"\]]*)[ \t\r\n\f]*\]/g,ub=/\\([\da-fA-F]{1,6}[ \t\r\n\f]?|.)/g,vb=function(a,b){var c="0x"+b-65536;
return c!==c?b:0>c?String.fromCharCode(c+65536):String.fromCharCode(c>>10|55296,1023&c|56320)};try{$.call(O.documentElement.childNodes,0)[0].nodeType}catch(wb){$=function(a){for(var b,c=[];b=this[a++];)c.push(b);return c}}A=g.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},E=g.setDocument=function(a){var d=a?a.ownerDocument||a:O;return d!==F&&9===d.nodeType&&d.documentElement?(F=d,G=d.documentElement,H=A(d),P.tagNameNoComments=f(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),P.attributes=f(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),P.getByClassName=f(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",a.getElementsByClassName&&a.getElementsByClassName("e").length?(a.lastChild.className="e",2===a.getElementsByClassName("e").length):!1}),P.getByName=f(function(a){a.id=N+0,a.innerHTML="<a name='"+N+"'></a><div name='"+N+"'></div>",G.insertBefore(a,G.firstChild);var b=d.getElementsByName&&d.getElementsByName(N).length===2+d.getElementsByName(N+0).length;return P.getIdNotName=!d.getElementById(N),G.removeChild(a),b}),y.attrHandle=f(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==V&&"#"===a.firstChild.getAttribute("href")})?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},P.getIdNotName?(y.find.ID=function(a,b){if(typeof b.getElementById!==V&&!H){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},y.filter.ID=function(a){var b=a.replace(ub,vb);return function(a){return a.getAttribute("id")===b}}):(y.find.ID=function(a,c){if(typeof c.getElementById!==V&&!H){var d=c.getElementById(a);return d?d.id===a||typeof d.getAttributeNode!==V&&d.getAttributeNode("id").value===a?[d]:b:[]}},y.filter.ID=function(a){var b=a.replace(ub,vb);return function(a){var c=typeof a.getAttributeNode!==V&&a.getAttributeNode("id");return c&&c.value===b}}),y.find.TAG=P.tagNameNoComments?function(a,b){return typeof b.getElementsByTagName!==V?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},y.find.NAME=P.getByName&&function(a,b){return typeof b.getElementsByName!==V?b.getElementsByName(name):void 0},y.find.CLASS=P.getByClassName&&function(a,b){return typeof b.getElementsByClassName===V||H?void 0:b.getElementsByClassName(a)},J=[],I=[":focus"],(P.qsa=c(d.querySelectorAll))&&(f(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||I.push("\\["+ab+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||I.push(":checked")}),f(function(a){a.innerHTML="<input type='hidden' i=''/>",a.querySelectorAll("[i^='']").length&&I.push("[*^$]="+ab+"*(?:\"\"|'')"),a.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),I.push(",.*:")})),(P.matchesSelector=c(K=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||G.msMatchesSelector))&&f(function(a){P.disconnectedMatch=K.call(a,"div"),K.call(a,"[s!='']:x"),J.push("!=",fb)}),I=new RegExp(I.join("|")),J=new RegExp(J.join("|")),L=c(G.contains)||G.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},M=G.compareDocumentPosition?function(a,b){var c;return a===b?(C=!0,0):(c=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b))?1&c||a.parentNode&&11===a.parentNode.nodeType?a===d||L(O,a)?-1:b===d||L(O,b)?1:0:4&c?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var c,e=0,f=a.parentNode,g=b.parentNode,i=[a],j=[b];if(a===b)return C=!0,0;if(!f||!g)return a===d?-1:b===d?1:f?-1:g?1:0;if(f===g)return h(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?h(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},C=!1,[0,0].sort(M),P.detectDuplicates=C,F):F},g.matches=function(a,b){return g(a,null,null,b)},g.matchesSelector=function(a,b){if((a.ownerDocument||a)!==F&&E(a),b=b.replace(tb,"='$1']"),!(!P.matchesSelector||H||J&&J.test(b)||I.test(b)))try{var c=K.call(a,b);if(c||P.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(d){}return g(b,F,null,[a]).length>0},g.contains=function(a,b){return(a.ownerDocument||a)!==F&&E(a),L(a,b)},g.attr=function(a,b){var c;return(a.ownerDocument||a)!==F&&E(a),H||(b=b.toLowerCase()),(c=y.attrHandle[b])?c(a):H||P.attributes?a.getAttribute(b):((c=a.getAttributeNode(b))||a.getAttribute(b))&&a[b]===!0?b:c&&c.specified?c.value:null},g.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},g.uniqueSort=function(a){var b,c=[],d=1,e=0;if(C=!P.detectDuplicates,a.sort(M),C){for(;b=a[d];d++)b===a[d-1]&&(e=c.push(d));for(;e--;)a.splice(c[e],1)}return a},z=g.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=z(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=z(b);return c},y=g.selectors={cacheLength:50,createPseudo:e,match:mb,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ub,vb),a[3]=(a[4]||a[5]||"").replace(ub,vb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||g.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&g.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return mb.CHILD.test(a[0])?null:(a[4]?a[2]=a[4]:c&&kb.test(c)&&(b=l(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(ub,vb).toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=S[a+" "];return b||(b=new RegExp("(^|"+ab+")"+a+"("+ab+"|$)"))&&S(a,function(a){return b.test(a.className||typeof a.getAttribute!==V&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=g.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===Q&&j[1],m=j[0]===Q&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[Q,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===Q)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[Q,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,d=y.pseudos[a]||y.setFilters[a.toLowerCase()]||g.error("unsupported pseudo: "+a);return d[N]?d(b):d.length>1?(c=[a,a,"",b],y.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var e,f=d(a,b),g=f.length;g--;)e=_.call(a,f[g]),a[e]=!(c[e]=f[g])}):function(a){return d(a,0,c)}):d}},pseudos:{not:e(function(a){var b=[],c=[],d=B(a.replace(gb,"$1"));return d[N]?e(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:e(function(a){return function(b){return g(a,b).length>0}}),contains:e(function(a){return function(b){return(b.textContent||b.innerText||z(b)).indexOf(a)>-1}}),lang:e(function(a){return lb.test(a||"")||g.error("unsupported lang: "+a),a=a.replace(ub,vb).toLowerCase(),function(b){var c;do if(c=H?b.getAttribute("xml:lang")||b.getAttribute("lang"):b.lang)return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===G},focus:function(a){return a===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!y.pseudos.empty(a)},header:function(a){return rb.test(a.nodeName)},input:function(a){return qb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[0>c?c+b:c]}),even:k(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}};for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[w]=i(w);for(w in{submit:!0,reset:!0})y.pseudos[w]=j(w);B=g.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){for(b||(b=l(a)),c=b.length;c--;)f=r(b[c]),f[N]?d.push(f):e.push(f);f=U(a,s(e,d))}return f},y.pseudos.nth=y.pseudos.eq,y.filters=v.prototype=y.pseudos,y.setFilters=new v,E(),g.attr=ib.attr,ib.find=g,ib.expr=g.selectors,ib.expr[":"]=ib.expr.pseudos,ib.unique=g.uniqueSort,ib.text=g.getText,ib.isXMLDoc=g.isXML,ib.contains=g.contains}(a);var Pb=/Until$/,Qb=/^(?:parents|prev(?:Until|All))/,Rb=/^.[^:#\[\.,]*$/,Sb=ib.expr.match.needsContext,Tb={children:!0,contents:!0,next:!0,prev:!0};ib.fn.extend({find:function(a){var b,c,d,e=this.length;if("string"!=typeof a)return d=this,this.pushStack(ib(a).filter(function(){for(b=0;e>b;b++)if(ib.contains(d[b],this))return!0}));for(c=[],b=0;e>b;b++)ib.find(a,this[b],c);return c=this.pushStack(e>1?ib.unique(c):c),c.selector=(this.selector?this.selector+" ":"")+a,c},has:function(a){var b,c=ib(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(ib.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(l(this,a,!1))},filter:function(a){return this.pushStack(l(this,a,!0))},is:function(a){return!!a&&("string"==typeof a?Sb.test(a)?ib(a,this.context).index(this[0])>=0:ib.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Sb.test(a)||"string"!=typeof a?ib(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?g.index(c)>-1:ib.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return this.pushStack(f.length>1?ib.unique(f):f)},index:function(a){return a?"string"==typeof a?ib.inArray(this[0],ib(a)):ib.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?ib(a,b):ib.makeArray(a&&a.nodeType?[a]:a),d=ib.merge(this.get(),c);return this.pushStack(ib.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ib.fn.andSelf=ib.fn.addBack,ib.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ib.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ib.dir(a,"parentNode",c)},next:function(a){return k(a,"nextSibling")},prev:function(a){return k(a,"previousSibling")},nextAll:function(a){return ib.dir(a,"nextSibling")},prevAll:function(a){return ib.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ib.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ib.dir(a,"previousSibling",c)},siblings:function(a){return ib.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ib.sibling(a.firstChild)},contents:function(a){return ib.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ib.merge([],a.childNodes)}},function(a,b){ib.fn[a]=function(c,d){var e=ib.map(this,b,c);return Pb.test(a)||(d=c),d&&"string"==typeof d&&(e=ib.filter(d,e)),e=this.length>1&&!Tb[a]?ib.unique(e):e,this.length>1&&Qb.test(a)&&(e=e.reverse()),this.pushStack(e)}}),ib.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?ib.find.matchesSelector(b[0],a)?[b[0]]:[]:ib.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!ib(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Ub="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Vb=/ jQuery\d+="(?:null|\d+)"/g,Wb=new RegExp("<(?:"+Ub+")[\\s/>]","i"),Xb=/^\s+/,Yb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Zb=/<([\w:]+)/,$b=/<tbody/i,_b=/<|&#?\w+;/,ac=/<(?:script|style|link)/i,bc=/^(?:checkbox|radio)$/i,cc=/checked\s*(?:[^=]|=\s*.checked.)/i,dc=/^$|\/(?:java|ecma)script/i,ec=/^true\/(.*)/,fc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gc={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ib.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},hc=m(W),ic=hc.appendChild(W.createElement("div"));gc.optgroup=gc.option,gc.tbody=gc.tfoot=gc.colgroup=gc.caption=gc.thead,gc.th=gc.td,ib.fn.extend({text:function(a){return ib.access(this,function(a){return a===b?ib.text(this):this.empty().append((this[0]&&this[0].ownerDocument||W).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(ib.isFunction(a))return this.each(function(b){ib(this).wrapAll(a.call(this,b))});if(this[0]){var b=ib(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(ib.isFunction(a)?function(b){ib(this).wrapInner(a.call(this,b))}:function(){var b=ib(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ib.isFunction(a);return this.each(function(c){ib(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ib.nodeName(this,"body")||ib(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)(!a||ib.filter(a,[c]).length>0)&&(b||1!==c.nodeType||ib.cleanData(t(c)),c.parentNode&&(b&&ib.contains(c.ownerDocument,c)&&q(t(c,"script")),c.parentNode.removeChild(c)));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ib.cleanData(t(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ib.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ib.clone(this,a,b)})},html:function(a){return ib.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Vb,""):b;if(!("string"!=typeof a||ac.test(a)||!ib.support.htmlSerialize&&Wb.test(a)||!ib.support.leadingWhitespace&&Xb.test(a)||gc[(Zb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Yb,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&(ib.cleanData(t(c,!1)),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){var b=ib.isFunction(a);return b||"string"==typeof a||(a=ib(a).not(this).detach()),this.domManip([a],!0,function(a){var b=this.nextSibling,c=this.parentNode;c&&(ib(this).remove(),c.insertBefore(a,b))})},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=bb.apply([],a);var e,f,g,h,i,j,k=0,l=this.length,m=this,q=l-1,r=a[0],s=ib.isFunction(r);if(s||!(1>=l||"string"!=typeof r||ib.support.checkClone)&&cc.test(r))return this.each(function(e){var f=m.eq(e);s&&(a[0]=r.call(this,e,c?f.html():b)),f.domManip(a,c,d)});if(l&&(j=ib.buildFragment(a,this[0].ownerDocument,!1,this),e=j.firstChild,1===j.childNodes.length&&(j=e),e)){for(c=c&&ib.nodeName(e,"tr"),h=ib.map(t(j,"script"),o),g=h.length;l>k;k++)f=j,k!==q&&(f=ib.clone(f,!0,!0),g&&ib.merge(h,t(f,"script"))),d.call(c&&ib.nodeName(this[k],"table")?n(this[k],"tbody"):this[k],f,k);if(g)for(i=h[h.length-1].ownerDocument,ib.map(h,p),k=0;g>k;k++)f=h[k],dc.test(f.type||"")&&!ib._data(f,"globalEval")&&ib.contains(i,f)&&(f.src?ib.ajax({url:f.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):ib.globalEval((f.text||f.textContent||f.innerHTML||"").replace(fc,"")));j=e=null}return this}}),ib.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ib.fn[a]=function(a){for(var c,d=0,e=[],f=ib(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),ib(f[d])[b](c),cb.apply(e,c.get());return this.pushStack(e)}}),ib.extend({clone:function(a,b,c){var d,e,f,g,h,i=ib.contains(a.ownerDocument,a);if(ib.support.html5Clone||ib.isXMLDoc(a)||!Wb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ic.innerHTML=a.outerHTML,ic.removeChild(f=ic.firstChild)),!(ib.support.noCloneEvent&&ib.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ib.isXMLDoc(a)))for(d=t(f),h=t(a),g=0;null!=(e=h[g]);++g)d[g]&&s(e,d[g]);if(b)if(c)for(h=h||t(a),d=d||t(f),g=0;null!=(e=h[g]);g++)r(e,d[g]);else r(a,f);return d=t(f,"script"),d.length>0&&q(d,!i&&t(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,n=m(b),o=[],p=0;l>p;p++)if(f=a[p],f||0===f)if("object"===ib.type(f))ib.merge(o,f.nodeType?[f]:f);else if(_b.test(f)){for(h=h||n.appendChild(b.createElement("div")),i=(Zb.exec(f)||["",""])[1].toLowerCase(),k=gc[i]||gc._default,h.innerHTML=k[1]+f.replace(Yb,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ib.support.leadingWhitespace&&Xb.test(f)&&o.push(b.createTextNode(Xb.exec(f)[0])),!ib.support.tbody)for(f="table"!==i||$b.test(f)?"<table>"!==k[1]||$b.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ib.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ib.merge(o,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=n.lastChild}else o.push(b.createTextNode(f));for(h&&n.removeChild(h),ib.support.appendChecked||ib.grep(t(o,"input"),u),p=0;f=o[p++];)if((!d||-1===ib.inArray(f,d))&&(g=ib.contains(f.ownerDocument,f),h=t(n.appendChild(f),"script"),g&&q(h),c))for(e=0;f=h[e++];)dc.test(f.type||"")&&c.push(f);return h=null,n},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ib.expando,i=ib.cache,j=ib.support.deleteExpando,k=ib.event.special;null!=(c=a[g]);g++)if((b||ib.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ib.event.remove(c,d):ib.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==V?c.removeAttribute(h):c[h]=null,_.push(e))}}});var jc,kc,lc,mc=/alpha\([^)]*\)/i,nc=/opacity\s*=\s*([^)]*)/,oc=/^(top|right|bottom|left)$/,pc=/^(none|table(?!-c[ea]).+)/,qc=/^margin/,rc=new RegExp("^("+jb+")(.*)$","i"),sc=new RegExp("^("+jb+")(?!px)[a-z%]+$","i"),tc=new RegExp("^([+-])=("+jb+")","i"),uc={BODY:"block"},vc={position:"absolute",visibility:"hidden",display:"block"},wc={letterSpacing:0,fontWeight:400},xc=["Top","Right","Bottom","Left"],yc=["Webkit","O","Moz","ms"];ib.fn.extend({css:function(a,c){return ib.access(this,function(a,c,d){var e,f,g={},h=0;if(ib.isArray(c)){for(f=kc(a),e=c.length;e>h;h++)g[c[h]]=ib.css(a,c[h],!1,f);return g}return d!==b?ib.style(a,c,d):ib.css(a,c)},a,c,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(a){var b="boolean"==typeof a;return this.each(function(){(b?a:w(this))?ib(this).show():ib(this).hide()})}}),ib.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=lc(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ib.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=ib.camelCase(c),j=a.style;if(c=ib.cssProps[i]||(ib.cssProps[i]=v(j,i)),h=ib.cssHooks[c]||ib.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=tc.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(ib.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||ib.cssNumber[i]||(d+="px"),ib.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(j[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=ib.camelCase(c);return c=ib.cssProps[i]||(ib.cssProps[i]=v(a.style,i)),h=ib.cssHooks[c]||ib.cssHooks[i],h&&"get"in h&&(g=h.get(a,!0,d)),g===b&&(g=lc(a,c,e)),"normal"===g&&c in wc&&(g=wc[c]),""===d||d?(f=parseFloat(g),d===!0||ib.isNumeric(f)?f||0:g):g},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),a.getComputedStyle?(kc=function(b){return a.getComputedStyle(b,null)},lc=function(a,c,d){var e,f,g,h=d||kc(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;return h&&(""!==i||ib.contains(a.ownerDocument,a)||(i=ib.style(a,c)),sc.test(i)&&qc.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i}):W.documentElement.currentStyle&&(kc=function(a){return a.currentStyle},lc=function(a,c,d){var e,f,g,h=d||kc(a),i=h?h[c]:b,j=a.style;return null==i&&j&&j[c]&&(i=j[c]),sc.test(i)&&!oc.test(c)&&(e=j.left,f=a.runtimeStyle,g=f&&f.left,g&&(f.left=a.currentStyle.left),j.left="fontSize"===c?"1em":i,i=j.pixelLeft+"px",j.left=e,g&&(f.left=g)),""===i?"auto":i}),ib.each(["height","width"],function(a,b){ib.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&pc.test(ib.css(a,"display"))?ib.swap(a,vc,function(){return A(a,b,d)}):A(a,b,d):void 0},set:function(a,c,d){var e=d&&kc(a);return y(a,c,d?z(a,b,d,ib.support.boxSizing&&"border-box"===ib.css(a,"boxSizing",!1,e),e):0)}}}),ib.support.opacity||(ib.cssHooks.opacity={get:function(a,b){return nc.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ib.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ib.trim(f.replace(mc,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=mc.test(f)?f.replace(mc,e):f+" "+e)}}),ib(function(){ib.support.reliableMarginRight||(ib.cssHooks.marginRight={get:function(a,b){return b?ib.swap(a,{display:"inline-block"},lc,[a,"marginRight"]):void 0}}),!ib.support.pixelPosition&&ib.fn.position&&ib.each(["top","left"],function(a,b){ib.cssHooks[b]={get:function(a,c){return c?(c=lc(a,b),sc.test(c)?ib(a).position()[b]+"px":c):void 0}}})}),ib.expr&&ib.expr.filters&&(ib.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!ib.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ib.css(a,"display"))},ib.expr.filters.visible=function(a){return!ib.expr.filters.hidden(a)}),ib.each({margin:"",padding:"",border:"Width"},function(a,b){ib.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+xc[d]+b]=f[d]||f[d-2]||f[0];return e}},qc.test(a)||(ib.cssHooks[a+b].set=y)});var zc=/%20/g,Ac=/\[\]$/,Bc=/\r?\n/g,Cc=/^(?:submit|button|image|reset|file)$/i,Dc=/^(?:input|select|textarea|keygen)/i;ib.fn.extend({serialize:function(){return ib.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ib.prop(this,"elements");return a?ib.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ib(this).is(":disabled")&&Dc.test(this.nodeName)&&!Cc.test(a)&&(this.checked||!bc.test(a))}).map(function(a,b){var c=ib(this).val();return null==c?null:ib.isArray(c)?ib.map(c,function(a){return{name:b.name,value:a.replace(Bc,"\r\n")}}):{name:b.name,value:c.replace(Bc,"\r\n")}}).get()}}),ib.param=function(a,c){var d,e=[],f=function(a,b){b=ib.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=ib.ajaxSettings&&ib.ajaxSettings.traditional),ib.isArray(a)||a.jquery&&!ib.isPlainObject(a))ib.each(a,function(){f(this.name,this.value)});else for(d in a)D(d,a[d],c,f);return e.join("&").replace(zc,"+")},ib.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ib.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ib.fn.hover=function(a,b){return this.mouseenter(a).mouseleave(b||a)};var Ec,Fc,Gc=ib.now(),Hc=/\?/,Ic=/#.*$/,Jc=/([?&])_=[^&]*/,Kc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Lc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mc=/^(?:GET|HEAD)$/,Nc=/^\/\//,Oc=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Pc=ib.fn.load,Qc={},Rc={},Sc="*/".concat("*");try{Fc=X.href}catch(Tc){Fc=W.createElement("a"),Fc.href="",Fc=Fc.href}Ec=Oc.exec(Fc.toLowerCase())||[],ib.fn.load=function(a,c,d){if("string"!=typeof a&&Pc)return Pc.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),ib.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(g="POST"),h.length>0&&ib.ajax({url:a,type:g,dataType:"html",data:c}).done(function(a){f=arguments,h.html(e?ib("<div>").append(ib.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])}),this},ib.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ib.fn[b]=function(a){return this.on(b,a)}}),ib.each(["get","post"],function(a,c){ib[c]=function(a,d,e,f){return ib.isFunction(d)&&(f=f||e,e=d,d=b),ib.ajax({url:a,type:c,dataType:f,data:d,success:e})}}),ib.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fc,type:"GET",isLocal:Lc.test(Ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":ib.parseJSON,"text xml":ib.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?G(G(a,ib.ajaxSettings),b):G(ib.ajaxSettings,a)},ajaxPrefilter:E(Qc),ajaxTransport:E(Rc),ajax:function(a,c){function d(a,c,d,e){var f,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),k=b,h=e||"",w.readyState=a>0?4:0,d&&(t=H(m,w,d)),a>=200&&300>a||304===a?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(ib.lastModified[g]=v),v=w.getResponseHeader("etag"),v&&(ib.etag[g]=v)),204===a?(f=!0,x="nocontent"):304===a?(f=!0,x="notmodified"):(f=I(m,t),x=f.state,l=f.data,s=f.error,f=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",f?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,j&&o.trigger(f?"ajaxSuccess":"ajaxError",[w,m,f?l:s]),q.fireWith(n,[w,x]),j&&(o.trigger("ajaxComplete",[w,m]),--ib.active||ib.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=ib.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?ib(n):ib.event,p=ib.Deferred(),q=ib.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!l)for(l={};b=Kc.exec(h);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return k&&k.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||Fc)+"").replace(Ic,"").replace(Nc,Ec[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=ib.trim(m.dataType||"*").toLowerCase().match(kb)||[""],null==m.crossDomain&&(e=Oc.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===Ec[1]&&e[2]===Ec[2]&&(e[3]||("http:"===e[1]?80:443))==(Ec[3]||("http:"===Ec[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=ib.param(m.data,m.traditional)),F(Qc,m,c,w),2===u)return w;j=m.global,j&&0===ib.active++&&ib.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Mc.test(m.type),g=m.url,m.hasContent||(m.data&&(g=m.url+=(Hc.test(g)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=Jc.test(g)?g.replace(Jc,"$1_="+Gc++):g+(Hc.test(g)?"&":"?")+"_="+Gc++)),m.ifModified&&(ib.lastModified[g]&&w.setRequestHeader("If-Modified-Since",ib.lastModified[g]),ib.etag[g]&&w.setRequestHeader("If-None-Match",ib.etag[g])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Sc+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)w.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(f in{success:1,error:1,complete:1})w[f](m[f]);if(k=F(Rc,m,c,w)){w.readyState=1,j&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,k.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getScript:function(a,c){return ib.get(a,b,c,"script")},getJSON:function(a,b,c){return ib.get(a,b,c,"json")}}),ib.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ib.globalEval(a),a}}}),ib.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)
}),ib.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=W.head||ib("head")[0]||W.documentElement;return{send:function(b,e){c=W.createElement("script"),c.async=!0,a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,b){(b||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(b,!0)}}}});var Uc=[],Vc=/(=)\?(?=&|$)|\?\?/;ib.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Uc.pop()||ib.expando+"_"+Gc++;return this[a]=!0,a}}),ib.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(Vc.test(c.url)?"url":"string"==typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vc.test(c.data)&&"data");return i||"jsonp"===c.dataTypes[0]?(f=c.jsonpCallback=ib.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(Vc,"$1"+f):c.jsonp!==!1&&(c.url+=(Hc.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||ib.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Uc.push(f)),h&&ib.isFunction(g)&&g(h[0]),h=g=b}),"script"):void 0});var Wc,Xc,Yc=0,Zc=a.ActiveXObject&&function(){var a;for(a in Wc)Wc[a](b,!0)};ib.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&J()||K()}:J,Xc=ib.ajaxSettings.xhr(),ib.support.cors=!!Xc&&"withCredentials"in Xc,Xc=ib.support.ajax=!!Xc,Xc&&ib.ajaxTransport(function(c){if(!c.crossDomain||ib.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=ib.noop,Zc&&delete Wc[g]),e)4!==i.readyState&&i.abort();else{l={},h=i.status,j=i.getAllResponseHeaders(),"string"==typeof i.responseText&&(l.text=i.responseText);try{k=i.statusText}catch(m){k=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(n){e||f(-1,n)}l&&f(h,k,l,j)},c.async?4===i.readyState?setTimeout(d):(g=++Yc,Zc&&(Wc||(Wc={},ib(a).unload(Zc)),Wc[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(b,!0)}}}});var $c,_c,ad=/^(?:toggle|show|hide)$/,bd=new RegExp("^(?:([+-])=|)("+jb+")([a-z%]*)$","i"),cd=/queueHooks$/,dd=[P],ed={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=bd.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){if(c=+f[2],d=f[3]||(ib.cssNumber[a]?"":"px"),"px"!==d&&h){h=ib.css(e.elem,a,!0)||c||1;do i=i||".5",h/=i,ib.style(e.elem,a,h+d);while(i!==(i=e.cur()/g)&&1!==i&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};ib.Animation=ib.extend(N,{tweener:function(a,b){ib.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ed[c]=ed[c]||[],ed[c].unshift(b)},prefilter:function(a,b){b?dd.unshift(a):dd.push(a)}}),ib.Tween=Q,Q.prototype={constructor:Q,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ib.cssNumber[c]?"":"px")},cur:function(){var a=Q.propHooks[this.prop];return a&&a.get?a.get(this):Q.propHooks._default.get(this)},run:function(a){var b,c=Q.propHooks[this.prop];return this.pos=b=this.options.duration?ib.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Q.propHooks._default.set(this),this}},Q.prototype.init.prototype=Q.prototype,Q.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ib.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ib.fx.step[a.prop]?ib.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ib.cssProps[a.prop]]||ib.cssHooks[a.prop])?ib.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Q.propHooks.scrollTop=Q.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ib.each(["toggle","show","hide"],function(a,b){var c=ib.fn[b];ib.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(R(b,!0),a,d,e)}}),ib.fn.extend({fadeTo:function(a,b,c,d){return this.filter(w).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ib.isEmptyObject(a),f=ib.speed(b,c,d),g=function(){var b=N(this,ib.extend({},a),f);g.finish=function(){b.stop(!0)},(e||ib._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=ib.timers,g=ib._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cd.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&ib.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ib._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ib.timers,g=d?d.length:0;for(c.finish=!0,ib.queue(this,a,[]),e&&e.cur&&e.cur.finish&&e.cur.finish.call(this),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ib.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ib.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ib.speed=function(a,b,c){var d=a&&"object"==typeof a?ib.extend({},a):{complete:c||!c&&b||ib.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ib.isFunction(b)&&b};return d.duration=ib.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ib.fx.speeds?ib.fx.speeds[d.duration]:ib.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){ib.isFunction(d.old)&&d.old.call(this),d.queue&&ib.dequeue(this,d.queue)},d},ib.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ib.timers=[],ib.fx=Q.prototype.init,ib.fx.tick=function(){var a,c=ib.timers,d=0;for($c=ib.now();d<c.length;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||ib.fx.stop(),$c=b},ib.fx.timer=function(a){a()&&ib.timers.push(a)&&ib.fx.start()},ib.fx.interval=13,ib.fx.start=function(){_c||(_c=setInterval(ib.fx.tick,ib.fx.interval))},ib.fx.stop=function(){clearInterval(_c),_c=null},ib.fx.speeds={slow:600,fast:200,_default:400},ib.fx.step={},ib.expr&&ib.expr.filters&&(ib.expr.filters.animated=function(a){return ib.grep(ib.timers,function(b){return a===b.elem}).length}),ib.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){ib.offset.setOffset(this,a,b)});var c,d,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;if(g)return c=g.documentElement,ib.contains(c,f)?(typeof f.getBoundingClientRect!==V&&(e=f.getBoundingClientRect()),d=S(g),{top:e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||0),left:e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}):e},ib.offset={setOffset:function(a,b,c){var d=ib.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=ib(a),h=g.offset(),i=ib.css(a,"top"),j=ib.css(a,"left"),k=("absolute"===d||"fixed"===d)&&ib.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),ib.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},ib.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ib.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ib.nodeName(a[0],"html")||(c=a.offset()),c.top+=ib.css(a[0],"borderTopWidth",!0),c.left+=ib.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ib.css(d,"marginTop",!0),left:b.left-c.left-ib.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||W.documentElement;a&&!ib.nodeName(a,"html")&&"static"===ib.css(a,"position");)a=a.offsetParent;return a||W.documentElement})}}),ib.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);ib.fn[a]=function(e){return ib.access(this,function(a,e,f){var g=S(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?ib(g).scrollLeft():f,d?f:ib(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),ib.each({Height:"height",Width:"width"},function(a,c){ib.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){ib.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return ib.access(this,function(c,d,e){var f;return ib.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?ib.css(c,d,h):ib.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=ib,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return ib})}(window),function(){var a,b=this,c=b.Backbone,d=[],e=d.push,f=d.slice,g=d.splice;a="undefined"!=typeof exports?exports:b.Backbone={},a.VERSION="1.0.0";var h=b._;h||"undefined"==typeof require||(h=require("underscore")),a.$=b.jQuery||b.Zepto||b.ender||b.$,a.noConflict=function(){return b.Backbone=c,this},a.emulateHTTP=!1,a.emulateJSON=!1;var i=a.Events={on:function(a,b,c){if(!k(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!k(this,"once",a,[b,c])||!b)return this;var d=this,e=h.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,f,g,i,j,l,m;if(!this._events||!k(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(g=a?[a]:h.keys(this._events),i=0,j=g.length;j>i;i++)if(a=g[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(l=0,m=f.length;m>l;l++)e=f[l],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=f.call(arguments,1);if(!k(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&l(c,b),d&&l(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},j=/\s+/,k=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(j.test(c)){for(var f=c.split(j),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},l=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},m={listenTo:"on",listenToOnce:"once"};h.each(m,function(a,b){i[b]=function(b,c,d){var e=this._listeners||(this._listeners={}),f=b._listenerId||(b._listenerId=h.uniqueId("l"));return e[f]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),i.bind=i.on,i.unbind=i.off,h.extend(a,i);var n=a.Model=function(a,b){var c,d=a||{};b||(b={}),this.cid=h.uniqueId("c"),this.attributes={},h.extend(this,h.pick(b,o)),b.parse&&(d=this.parse(d,b)||{}),(c=h.result(this,"defaults"))&&(d=h.defaults({},d,c)),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)},o=["url","urlRoot","collection"];h.extend(n.prototype,i,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return h.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return h.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e,f,g,i,j,k,l;if(null==a)return this;if("object"==typeof a?(e=a,c=b):(e={})[a]=b,c||(c={}),!this._validate(e,c))return!1;f=c.unset,i=c.silent,g=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=h.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in e&&(this.id=e[this.idAttribute]);for(d in e)b=e[d],h.isEqual(l[d],b)||g.push(d),h.isEqual(k[d],b)?delete this.changed[d]:this.changed[d]=b,f?delete l[d]:l[d]=b;if(!i){g.length&&(this._pending=!0);for(var m=0,n=g.length;n>m;m++)this.trigger("change:"+g[m],this,l[g[m]],c)}if(j)return this;if(!i)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,h.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var c in this.attributes)b[c]=void 0;return this.set(b,h.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!h.isEmpty(this.changed):h.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes;for(var e in a)h.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d){return b.set(b.parse(d,a),a)?(c&&c(b,d,a),void b.trigger("sync",b,d,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,c){var d,e,f,g=this.attributes;if(null==a||"object"==typeof a?(d=a,c=b):(d={})[a]=b,!(!d||c&&c.wait||this.set(d,c)))return!1;if(c=h.extend({validate:!0},c),!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=h.extend({},g,d)),void 0===c.parse&&(c.parse=!0);var i=this,j=c.success;return c.success=function(a){i.attributes=g;var b=i.parse(a,c);return c.wait&&(b=h.extend(d||{},b)),h.isObject(b)&&!i.set(b,c)?!1:(j&&j(i,a,c),void i.trigger("sync",i,a,c))},L(this,c),e=this.isNew()?"create":c.patch?"patch":"update","patch"===e&&(c.attrs=d),f=this.sync(e,this,c),d&&c.wait&&(this.attributes=g),f},destroy:function(a){a=a?h.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(e){(a.wait||b.isNew())&&d(),c&&c(b,e,a),b.isNew()||b.trigger("sync",b,e,a)},this.isNew())return a.success(),!1;L(this,a);var e=this.sync("delete",this,a);return a.wait||d(),e},url:function(){var a=h.result(this,"urlRoot")||h.result(this.collection,"url")||K();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},h.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=h.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;return c?(this.trigger("invalid",this,c,h.extend(b||{},{validationError:c})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];h.each(p,function(a){n.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.attributes),h[a].apply(h,b)}});var q=a.Collection=function(a,b){b||(b={}),b.url&&(this.url=b.url),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,h.extend({silent:!0},b))},r={add:!0,remove:!0,merge:!0},s={add:!0,merge:!1,remove:!1};h.extend(q.prototype,i,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return a.sync.apply(this,arguments)},add:function(a,b){return this.set(a,h.defaults(b||{},s))},remove:function(a,b){a=h.isArray(a)?a.slice():[a],b||(b={});var c,d,e,f;for(c=0,d=a.length;d>c;c++)f=this.get(a[c]),f&&(delete this._byId[f.id],delete this._byId[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger("remove",f,this,b)),this._removeReference(f));return this},set:function(a,b){b=h.defaults(b||{},r),b.parse&&(a=this.parse(a,b)),h.isArray(a)||(a=a?[a]:[]);var c,d,f,i,j,k=b.at,l=this.comparator&&null==k&&b.sort!==!1,m=h.isString(this.comparator)?this.comparator:null,n=[],o=[],p={};for(c=0,d=a.length;d>c;c++)(f=this._prepareModel(a[c],b))&&((i=this.get(f))?(b.remove&&(p[i.cid]=!0),b.merge&&(i.set(f.attributes,b),l&&!j&&i.hasChanged(m)&&(j=!0))):b.add&&(n.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f)));if(b.remove){for(c=0,d=this.length;d>c;++c)p[(f=this.models[c]).cid]||o.push(f);o.length&&this.remove(o,b)}if(n.length&&(l&&(j=!0),this.length+=n.length,null!=k?g.apply(this.models,[k,0].concat(n)):e.apply(this.models,n)),j&&this.sort({silent:!0}),b.silent)return this;for(c=0,d=n.length;d>c;c++)(f=n[c]).trigger("add",f,this,b);return j&&this.trigger("sort",this,b),this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;d>c;c++)this._removeReference(this.models[c]);return b.previousModels=this.models,this._reset(),this.add(a,h.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return h.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),h.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(h.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=h.isFunction(b)?b:function(a){return a.get(b)};return h.sortedIndex(this.models,a,d,c)},pluck:function(a){return h.invoke(this.models,"get",a)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;return a.success=function(d){var e=a.reset?"reset":"set";c[e](d,a),b&&b(c,d,a),c.trigger("sync",c,d,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?h.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;return b.success=function(e){b.wait&&c.add(a,b),d&&d(a,e,b)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:(this.trigger("invalid",this,a,b),!1)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var t=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];h.each(t,function(a){q.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.models),h[a].apply(h,b)}});var u=["groupBy","countBy","sortBy"];h.each(u,function(a){q.prototype[a]=function(b,c){var d=h.isFunction(b)?b:function(a){return a.get(b)};return h[a](this.models,d,c)}});var v=a.View=function(a){this.cid=h.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];h.extend(v.prototype,i,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(b,c){return this.$el&&this.undelegateEvents(),this.$el=b instanceof a.$?b:a.$(b),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=h.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];if(h.isFunction(c)||(c=this[a[b]]),c){var d=b.match(w),e=d[1],f=d[2];c=h.bind(c,this),e+=".delegateEvents"+this.cid,""===f?this.$el.on(e,c):this.$el.on(e,f,c)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(a){this.options&&(a=h.extend({},h.result(this,"options"),a)),h.extend(this,h.pick(a,x)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(h.result(this,"el"),!1);else{var b=h.extend({},h.result(this,"attributes"));this.id&&(b.id=h.result(this,"id")),this.className&&(b["class"]=h.result(this,"className"));var c=a.$("<"+h.result(this,"tagName")+">").attr(b);this.setElement(c,!1)}}}),a.sync=function(b,c,d){var e=y[b];h.defaults(d||(d={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var f={type:e,dataType:"json"};if(d.url||(f.url=h.result(c,"url")||K()),null!=d.data||!c||"create"!==b&&"update"!==b&&"patch"!==b||(f.contentType="application/json",f.data=JSON.stringify(d.attrs||c.toJSON(d))),d.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),d.emulateHTTP&&("PUT"===e||"DELETE"===e||"PATCH"===e)){f.type="POST",d.emulateJSON&&(f.data._method=e);var g=d.beforeSend;d.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",e),g?g.apply(this,arguments):void 0}}"GET"===f.type||d.emulateJSON||(f.processData=!1),"PATCH"!==f.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=d.xhr=a.ajax(h.extend(f,d));return c.trigger("request",c,i,d),i};var y={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var z=a.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,C=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(z.prototype,i,{initialize:function(){},route:function(b,c,d){h.isRegExp(b)||(b=this._routeToRegExp(b)),h.isFunction(c)&&(d=c,c=""),d||(d=this[c]);var e=this;return a.history.route(b,function(f){var g=e._extractParameters(b,f);d&&d.apply(e,g),e.trigger.apply(e,["route:"+c].concat(g)),e.trigger("route",c,g),a.history.trigger("route",e,c,g)}),this},navigate:function(b,c){return a.history.navigate(b,c),this},_bindRoutes:function(){if(this.routes){this.routes=h.result(this,"routes");for(var a,b=h.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(D,"\\$&").replace(A,"(?:$1)?").replace(B,function(a,b){return b?a:"([^/]+)"}).replace(C,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return h.map(c,function(a){return a?decodeURIComponent(a):null})}});var E=a.History=function(){this.handlers=[],h.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,G=/^\/+|\/+$/g,H=/msie [\w.]+/,I=/\/$/;E.started=!1,h.extend(E.prototype,i,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(I,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(F,"")},start:function(b){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=h.extend({},{root:"/"},this.options,b),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var c=this.getFragment(),d=document.documentMode,e=H.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);this.root=("/"+this.root+"/").replace(G,"/"),e&&this._wantsHashChange&&(this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(c)),this._hasPushState?a.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!e?a.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=c;var f=this.location,g=f.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!g?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&g&&f.hash&&(this.fragment=this.getHash().replace(F,""),this.history.replaceState({},document.title,this.root+this.fragment+f.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&&this.navigate(a),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=h.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0});return c},navigate:function(a,b){if(!E.started)return!1;if(b&&b!==!0||(b={trigger:b}),a=this.getFragment(a||""),this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),a.history=new E;var J=function(a,b){var c,d=this;c=a&&h.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},h.extend(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&h.extend(c.prototype,a),c.__super__=d.prototype,c};n.extend=q.extend=z.extend=v.extend=E.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}}}.call(this),define("backbone",["underscore","jquery"],function(a){return function(){var b;return b||a.Backbone}}(this)),define("templates",[],function(){return this.JST=this.JST||{},this.JST["app/scripts/templates/Debug_for_SPI_of_nRF24L01.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="debug-for-spi-of-nrf24l01-">Debug for SPI of nRF24L01 (利用邏輯分析儀)</h1>\n<p>因為nRF遲遲測不出來，為了尋找問題所在，而利用了<a href="http://www.zeroplus.com.tw/logic-analyzer_tw/products.php?product_id=101&amp;pdn=1&amp;pdnex=150">邏輯分析儀</a>來測試板stm32f4Discovery是否輸出有問題</p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_gU3VHHMOKUE_p.88862_1387244974067_921284_692216187464466_187371135_o.jpg" alt=""></p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_gU3VHHMOKUE_p.88862_1387244700410_SPI.png" alt=""></p>\n<p>其中</p>\n<p>A0 = CE (PC4)</p>\n<p>A1 = CSN (PB12)</p>\n<p>A2 = SCK (PB13)</p>\n<p>A5 = MOSI (PB15)</p>\n<p>A4 = MISO (PB14)</p>\n<p>A3 = IRQ (PC5)</p>\n<p>從<a href="https://github.com/zxc2694/QuadrotorGroundStation/blob/master/module_nrf24l01.c">nRF程式碼</a>與波形來看，因為<strong>nRF_Check（）</strong>過不了的關係所以A0一直都沒有值是正確的；然而A1動作也是對的，在<strong>nRF_ReadBuf（）與nRF_WriteBuf（）</strong>重複執行，所以會產生這樣的訊號；A2可以看到確實有clock輸出 ；A4、A5可以先不用管，因為我們只有單一傳輸沒有一對多；而A3的值也沒問題。<strong>所以STM32的輸出根本沒有錯。</strong></p>\n<undefined><li><strong>問題的可能性只有四種：</strong></li></undefined>\n\n<ol>\n<li><p>程式碼有問題。                                </p>\n</li>\n<li><p>STM32f4Discovery板子有問題。</p>\n</li>\n</ol>\n<p>3.接線錯誤。</p>\n<ol>\n<li><p>nRF有問題。</p>\n<undefined><li><strong>解決問題：</strong></li></undefined>\n</li>\n<li><p>一樣的程式碼，在同STM32核心，飛控板裡的nRF可以正確執行，所以程式碼一定是對的！</p>\n</li>\n<li><p><strong>這裡的邏輯分析儀就是用來判斷第二點的問題</strong>，所以板子輸出是對的！</p>\n</li>\n<li><p>在一開始，接線一直是我們認為最有問題的，但所有的接線腳位，都已經知道正確接法了，接了20次有了......，連線都重新全換過，所以非常確定不是接線問題！</p>\n</li>\n<li><p>結論就是 nRF有問題，買來的兩個nRF或許是壞的！</p>\n</li>\n</ol>\n\n';return __p},this.JST["app/scripts/templates/Filtering.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="filtering">Filtering</h1>\n<p><a href="http://robottini.altervista.org/kalman-filter-vs-complementary-filter"></a><a href="http://robottini.altervista.org/kalman-filter-vs-complementary-filter">http://robottini.altervista.org/kalman-filter-vs-complementary-filter</a></p>\n<p><a href="http://www.instructables.com/id/PCB-Quadrotor-Brushless/step15/IMU-Part-2-Complementary-Filter/"></a><a href="http://www.instructables.com/id/PCB-Quadrotor-Brushless/step15/IMU-Part-2-Complementary-Filter/">http://www.instructables.com/id/PCB-Quadrotor-Brushless/step15/IMU-Part-2-Complementary-Filter/</a></p>\n<p><a href="http://web.mit.edu/scolton/www/filter.pdf"></a><a href="http://web.mit.edu/scolton/www/filter.pdf">http://web.mit.edu/scolton/www/filter.pdf</a></p>\n<p><a href="http://www.pieter-jan.com/node/11"></a><a href="http://www.pieter-jan.com/node/11">http://www.pieter-jan.com/node/11</a></p>\n\n';return __p},this.JST["app/scripts/templates/Git.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="git-">Git 教學</h1>\n<p><strong>Q.<code>git clone</code>從遠端下載檔案後，如何下載其分支?</strong></p>\n<p>A<code>git fetch origin branch_name:branch_name</code></p>\n<p>一般而言在打到<code>git fetch origin</code>按<code>tab</code>就會有提示跑出來</p>\n<p><strong>Q.如何修改遠端分支的名稱？</strong></p>\n<p>A.本例為遠端上的分支名master改為master-old</p>\n<ul>\n<li>git push origin master:master-old        # 1</li>\n<li>git branch master-old origin/master-old  # 2</li>\n<li>git push -f origin     </li>\n</ul>\n<p>Ref:</p>\n<p><a href="http://stackoverflow.com/questions/1526794/how-to-rename-master-branch-in-git"></a><a href="http://stackoverflow.com/questions/1526794/how-to-rename-master-branch-in-git">http://stackoverflow.com/questions/1526794/how-to-rename-master-branch-in-git</a></p>\n<p><strong>Q. 合作開發專案時，當有人上傳新的程式碼，但他只放在他的分支，如何讓我的分支也能夠更新與他一模一樣？</strong></p>\n<ul>\n<li>(假設apple和banana兩人在合作開發quadcopter，我是apple有一個叫appbranch的分支, 想更新和banana的分支banbranch一樣)</li>\n</ul>\n<p><strong>Ａ：</strong></p>\n<p>   git checkout appbranch</p>\n<p>   git  pull origin <a href="https://github.com/banana/Qcopter.git"></a><a href="https://git[h](https://git)[ub.com](https://gith)[/](https://github.com)[ba](https://github.com//Qcopter.git)[na](https://github.com/ba/Qcopter.git)[na](https://github.com/bana/Qcopter.git)[/](https://github.com/apple)[Q](https://github.com/apple/)[c](https://github.com/apple/Q)[op](https://github.com/apple/Qc)[ter](https://github.com/apple/Qcop).git[">https://git[h](https://git)[ub.com](https://gith)[/](https://github.com)[ba](https://github.com//Qcopter.git)[na](https://github.com/ba/Qcopter.git)[na](https://github.com/bana/Qcopter.git)[/](https://github.com/apple)[Q](https://github.com/apple/)[c](https://github.com/apple/Q)[op](https://github.com/apple/Qc)[ter](https://github.com/apple/Qcop).git[</a> &quot;banbranch&quot;](<a href="https://github.com/banana/Qcopter.git)（重點在分支要打上">https://github.com/banana/Qcopter.git)（重點在分支要打上</a>&quot;  &quot;）</p>\n<p>   git pull後通常都會發生程式衝突，必須要手動修正(ps.可以利用git difftool 來更改程式碼)</p>\n<p>   git  pull <a href="https://github.com/banana/Qcopter.git"></a><a href="https://github.com/banana/Qcopter.git"><a href="https://github.com/banana/Qcopter.git">https://github.com/banana/Qcopter.git</a></a><a href="https://github.com/banana/Qcopter.git"> &quot;banbranch&quot;</a>（在一次）</p>\n<p>   git commit -a -m&#39;~~~~&#39;   (要打上 -a)</p>\n<p>   git push origin appbranch </p>\n<ul>\n<li>git pull 二次是因為當第二次pull 程式碼就不會有衝突了, 就可以直接打上commit</li>\n<li>如果只有一次的話，可能會有一些問題，當你手動更改或許還有些許衝突, 然後這樣子在network graph裡面就看不到你的線連到原作者的路徑了 ,保險一點的方法就是git pull 兩次</li>\n<li>origin只有第一次要打 後來就可以不用打</li>\n</ul>\n<p><strong>Q.我要如何把自己master的程式推到github上面？</strong></p>\n<p>A:</p>\n<p>   git status  //看你有動過什麼檔案</p>\n<p>   git add &quot;modify name&quot; //增加你動過的檔案</p>\n<p>   git commit //write your title and record shh key</p>\n<p>   tig //確認你的更新有沒歷史紀錄</p>\n<p>   git pull //推到你自己的github上</p>\n<p>   如果是分支 是打git push origin <code>branchname</code></p>\n<p>   pull 是代表你要中端機的code更新跟github一樣</p>\n<p>  例如你抓別人的code 別人更新了 你只要在他資料夾打git pull 就更新跟</p>\n<p>  他一樣了  </p>\n<p><strong>Q.git pull什麼時候需要加網址？</strong></p>\n<p>A:  當你是fork別人的專案,然後當初git clone 自己網址才要加網址</p>\n<pre><code> 如果你是git clone 別人網址 沒fork 只要打git pull</code></pre>\n<p><strong>Q.我想回到之前的commit？</strong></p>\n<p>A. </p>\n<ol>\n<li>在github的commit看想回到哪裡， commit裡面有 SSH key 把它複製下來.（假設SSH key為4bc3e5c572d86f1aebd5dce53a4bec2c0c090209）</li>\n<li><p>git reset --hard 4bc3e5c572d86f1aebd5dce53a4bec2c0c090209</p>\n</li>\n<li><p>它會顯示  HEAD is now at 4bc3e5c &quot;你的commit名稱&quot;</p>\n</li>\n<li><p>用tig 看是否已跳回去。</p>\n</li>\n</ol>\n\n';
return __p},this.JST["app/scripts/templates/MT9V034.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="-mt9v034">影像模組 MT9V034</h1>\n<p>我們的影像模組是採用<a href="http://item.taobao.com/item.htm?id=19722144419">MT9V034</a>這顆型號，目前是想讓四軸不只可以穩定的飛行，還可以讓它<strong>空拍</strong>，用影像鏡頭來拍照，並且將圖檔存入SD卡裡面。</p>\n<p><a href="https://pixhawk.ethz.ch/"></a><a href="https://pixhawk.ethz.ch/px4/modules/px4flow"><a href="https://pixhawk.ethz.ch/">https://pixhawk.ethz.ch/</a></a><a href="https://pixhawk.ethz.ch/px4/modules/px4flow"> px4/modules/px4flow</a><a href="https://pixhawk.ethz.ch/px4/modules/px4flow">.</a></p>\n<p><a href="https://github.com/Hom19910422/QCopterMachineVision"></a><a href="https://github.com/Hom19910422/QCopterMachineVision">https://github.com/Hom19910422/QCopterMachineVision</a></p>\n<h2 id="mt9v034-c">mt9v034.c</h2>\n<p>[<a href="https://github.com/PX4/Flow/blob/master/src/mt9v034.c">參考PX4 flow程式碼</a>]</p>\n<ul>\n<li><em>/* Chip Control</em></li>\n</ul>\n<hr>\n<ul>\n<li><em>         * bits           | 15 | ... | 9 | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |</em></li>\n</ul>\n<hr>\n<ul>\n<li><em>         * current values | 0  | ... | 0 | 1 | 1 | 0 | 0 | 0 | 1 | 0 | 0 | 0 |</em></li>\n</ul>\n<hr>\n<ul>\n<li><em>         * (0:2) Scan Mode (Progressive scan)</em></li>\n<li><em>         * (3:4) Sensor Operation Mode (Master mode)</em></li>\n<li><em>         * (5) Stereoscopy Mode (Disable)</em></li>\n<li><em>         * (6) Stereoscopic Master/Slave mode (not used)</em></li>\n<li><em>         * (7) Parallel Output Enable (Enable)</em></li>\n<li><em>         * (8) Simultaneous/Sequential Mode (Simultaneous mode)</em></li>\n<li><em>         * (9) Reserved</em></li>\n</ul>\n<hr>\n<ul>\n<li><em>         * (15)Context A (0) / Context B (1)</em></li>\n<li><em>         */</em></li>\n</ul>\n<p><strong>void</strong> <strong>mt9v034_context_configuration</strong>(<strong>void</strong>)</p>\n<ul>\n<li>//<em>Configures the mt9v034 camera with two context (binning 4 and binning 2).</em></li>\n</ul>\n<p><strong>void</strong> <strong>mt9v034_set_context</strong>()</p>\n<ul>\n<li>//<em>Changes sensor context based on settings</em></li>\n</ul>\n<p><strong>uint8_t</strong> <strong>mt9v034_WriteReg</strong>(<strong>uint16_t</strong> Addr, <strong>uint8_t</strong> Data)</p>\n<ul>\n<li>//<em>Writes a byte at a specific Camera register</em></li>\n</ul>\n<p><strong>uint8_t</strong> <strong>mt9v034_WriteReg16</strong>(<strong>uint16_t</strong> address, <strong>uint16_t</strong> Data)</p>\n<ul>\n<li>//<em>Writes to a specific Camera register</em></li>\n</ul>\n<p><strong>uint8_t</strong> <strong>mt9v034_ReadReg</strong>(<strong>uint16_t</strong> Addr)</p>\n<ul>\n<li>//<em>Reads a byte from a specific Camera register</em></li>\n</ul>\n<p><strong>uint16_t</strong> <strong>mt9v034_ReadReg16</strong>(<strong>uint8_t</strong> address)</p>\n<ul>\n<li>//<em>Reads from a specific Camera register</em></li>\n</ul>\n<h2 id="mt9v034-pin">mt9v034  Pin</h2>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_FHBw4daIJbY_p.88862_1387717723192_未命名.png" alt=""></p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_FHBw4daIJbY_p.88862_1387717669067_48pin.png" alt=""></p>\n<h2 id="mt9v032-">MT9V032主要参数：</h2>\n<ul>\n<li>感光面积是1/3英寸，像素是Wide-<u>VGA</u>，752*480,输入27M时钟时，它全帧输出速度为60帧/秒。</li>\n<li>快门方式；CMOS的快门方式一般有两种，卷帘快门(<u>Rolling shutter</u>)与全局快门(global shutter)，本模块是Global <u>shutter</u>。它们的区别将在后边加以描述。</li>\n<li>灵敏度；4.8V/<u>lux</u>-<u>sec</u>，就是单位光强照在传感器上1秒钟话，传感器可以输出4.8V的电压。一般CMOS有0.5V，0.7V的，多数是1.0V的，还有2.1V，4.8V绝对CMOS中的亮点了，很暗的光线时它都可以清晰的成像。</li>\n<li>动态范围；&gt;55dB <u>linear</u>;  &gt;100dB - 110dB in HiDy <u>mode</u>;本模块支持超宽动态，具体在后边描述。</li>\n<li>接口；10Bit 并口; LVDS，支持立体（双目）视觉.</li>\n</ul>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_FHBw4daIJbY_p.88549_1387801133805_DCMI.png" alt=""></p>\n\n';return __p},this.JST["app/scripts/templates/OV7670-CMOS.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="ov7670-cmos-">OV7670-CMOS模組</h1>\n<p>原始版本datasheet<a href="http://www.voti.nl/docs/OV7670.pdf"></a><a href="http://www.voti.nl/docs/OV7670.pdf">http://www.voti.nl/docs/OV7670.pdf</a></p>\n<ul>\n<li><p>controlled through the Serial Camera Control Bus (SCCB) interface.</p>\n</li>\n<li><p>st standard lib DCMI example 有寫說SCCB是I2C like protocol！</p>\n</li>\n<li>詳細SCCB spec: <a href="http://www.ovt.com/download_document.php?type=document&amp;DID=63"></a><a href="http://www.ovt.com/download_document.php?type=document&amp;DID=63">http://www.ovt.com/download_document.php?type=document&amp;DID=63</a>\n*</li>\n</ul>\n<p>為了配合王同學<a href="https://github.com/Hom19910422/QCopterMachineVision">的QcopterMV開發板</a>，改用此模組(<strong>OV7670-CMOS</strong>)傳輸影像。</p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_HdKevEgZfSA_p.88862_1388211875814_123.jpg" alt=""></p>\n<table style="font-size:13px;cell-spacing: 0px; border-collapse: collapse;"><tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">VDD</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">GND</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">/</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Pin</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Type</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Description</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">SDIOC</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">SDIOD</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">/</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">VDD**</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Supply</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Power supply</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">VSYNC</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">HREF</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">/</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">GND</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Supply</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Ground level</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">PCLK</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">XCLK</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">/</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">SDIOC</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Input</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">SCCB clock</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">D7</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">D6</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">/</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">SDIOD</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Output</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">SCCB data</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">D5</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">D4</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">/</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">VSYNC</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Output</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Vertical synchronization</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">D3</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">D2</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">/</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">HREF</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Output</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Horizontal synchronization</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">D1</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">D0</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">/</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">PCLK</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Output</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Pixel clock</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">RESET</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">PWDN</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">/</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">XCLK</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Input</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">System clock</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">/</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">D0-D7</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Output</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Video parallel output</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">/</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">RESET</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Input</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Reset (Active low)</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added"></td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">/</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">PWDN</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Input</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Power down (Active high)</td>\n</tr>\n</table>\n\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_HdKevEgZfSA_p.88862_1387902424723_未命名.png" alt=""></p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_HdKevEgZfSA_p.88862_1387902993979_未命名.png" alt=""></p>\n<p>王同學的QcopterMV開發板</p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_HdKevEgZfSA_p.88862_1387902821381_hackpad.com_FHBw4daIJbY_p.88549_1387801133805_DCMI.png" alt=""></p>\n<p>TTL Connection:</p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_HdKevEgZfSA_p.88862_1388735966152_1234.bmp" alt=""></p>\n<p>補充一下datasheet 此模組(<strong>OV7670-CMOS</strong>)</p>\n<p>IO 1~IO 3 對應到王同學的QcopterMV開發板lay out圖中的</p>\n<p>NetDCMI_18~NetDCMI_20</p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_HdKevEgZfSA_p.94311_1387903408829_undefined" alt=""></p>\n<p>接腳說明:</p>\n<ul>\n<li>OV7670 视频口有八根数据线, D[7:0]，它支持的数据格式有 8 位 RGB raw 输出, 8 位 YcbCr 输出, 8 位 RGB 565/555/444 输出。</li>\n<li>行同步信号 Href 和 Hsyn 是用同一引脚（Href pin）输出，通过写 SCCB 寄存器，可 选择这个引脚作为 Href 或 hsyn 信号。</li>\n<li>SCCB 总线 SIO_C 和 SIO_D 应外加上拉电阻，典型值是 4.7K。</li>\n<li>Reset#低有效，可由 GPIO 控制，若不使用时可连到 DOVDD。如果 Reset#连到 DOVDD，必 须通过写 SCCB 寄存器来进行软件复位。  </li>\n</ul>\n<h2 id="github-dcmi_ov7670">github  DCMI_OV7670</h2>\n<p>我們的影像開發專案：<a href="https://github.com/zxc2694/DCMI_OV7670"></a><a href="https://github.com/zxc2694/DCMI_OV7670"><a href="https://github.com/zxc2694/DCMI_OV7670">https://github.com/zxc2694/DCMI_OV7670</a></a></p>\n<p><strong>sccb.h:(腳位)</strong></p>\n<ul>\n<li><a href="/ep/search/?q=%23define&amp;via=HdKevEgZfSA">#define</a>  SCCB_SDA_PIN   GPIO_Pin_13</li>\n<li><h1 id="define-sccb_scl_pin-gpio_pin_3">define  SCCB_SCL_PIN   GPIO_Pin_3</h1>\n</li>\n<li><h1 id="define-sccb_sda_gpio-gpioc">define  SCCB_SDA_GPIO      GPIOC</h1>\n</li>\n<li><h1 id="define-sccb_scl_gpio-gpiob">define  SCCB_SCL_GPIO      GPIOB</h1>\n</li>\n<li><h1 id="define-sensor_vsync_pin-gpio_pin_7">define Sensor_VSYNC_PIN    GPIO_Pin_7</h1>\n</li>\n<li><h1 id="define-gpio_vsync-gpiob">define GPIO_VSYNC          GPIOB</h1>\n</li>\n<li><h1 id="define-rcc_vsync_clock-rcc_ahb2periph_gpiob">define RCC_VSYNC_Clock     RCC_AHB2Periph_GPIOB</h1>\n</li>\n<li><h1 id="define-gpio_pin_vsync_cmos-gpio_pin_3">define GPIO_PIN_VSYNC_CMOS                GPIO_Pin_3</h1>\n</li>\n<li><h1 id="define-exti_line_vsync_cmos-exti_line3">define EXTI_LINE_VSYNC_CMOS               EXTI_Line3</h1>\n</li>\n<li><h1 id="define-gpio_port_source_vsync_cmos-gpio_portsourcegpioc">define GPIO_PORT_SOURCE_VSYNC_CMOS        GPIO_PortSourceGPIOC</h1>\n</li>\n<li><h1 id="define-gpio_pin_source_vsync_cmos-gpio_pinsource3">define GPIO_PIN_SOURCE_VSYNC_CMOS         GPIO_PinSource3</h1>\n</li>\n</ul>\n<p><strong>SCCB<em>OV7670.c (_DCMI pins的連接</em>)</strong></p>\n<undefined><li><strong>void OV7670_HW_Init(void)  </strong></li></undefined>\n\n<p><a href="https://github.com/zxc2694/DCMI_OV7670/blob/master/program/SCCB_OV7670.c"></a><a href="https://github.com/zxc2694/DCMI_OV7670/blob/master/program/SCCB_OV7670.c"><a href="https://github.com/zxc2694/DCMI_OV7670/blob/master/program/SCCB_OV7670.c">https://github.com/zxc2694/DCMI_OV7670/blob/master/program/SCCB_OV7670.c</a></a></p>\n<undefined><li>\n</li></undefined>\n\n<h2 id="-">相關教學</h2>\n<p>1.<a href="http://www.dzsj.net/dzcp/%E5%9F%BA%E4%BA%8ESTM32F417%E7%9A%84%E5%9B%BE%E5%83%8F%E9%87%87%E9%9B%86%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1.htm">基于STM32F417的图像采集系统设计</a></p>\n<p>2.<a href="http://bbs.eeworld.com.cn/thread-355582-1-1.html">51+OV7670+FIFO+SD卡+znFAT+QVGA BMP 实现简易数码相机</a></p>\n<ol>\n<li><p>參考文件 : <a href="https://www.dropbox.com/s/6e5dv705glwmz6a/OV7670-CCD%E6%A8%A1%E7%B5%84.rar">OV7670-CCD模組.rar</a></p>\n</li>\n<li><p><a href="http://www.amobbs.com/thread-5038120-1-1.html">DCMI_Config</a></p>\n</li>\n<li><p><a href="http://wenku.baidu.com/view/74efaec0aa00b52acfc7ca22.html">SCCB與 I2C差別</a> (<a href="http://blog.csdn.net/liugf05/article/details/8167771">補充</a>)</p>\n</li>\n<li><p>OV7670输出同步信号包括：场同步信号VSYNC、行同步信号HREF、像素时钟PCLK。</p>\n</li>\n<li><p>在系统初始化设置成功以后，微控制器不断监测VSYNC信号电平变化，根据VSYNC产生的中断情况，控制FIFO对图像数据的读／写：</p>\n</li>\n<li><p>当STM32F417<strong>第一次检测到VSYNC下降沿时，系统第一次产生中断，表明OV7670开始输出一帧图像</strong>，STM32F417将FIFO_WEN置高电平，当HREF有效(高电平)时，<strong>FIFO_WEN</strong>与HREF通过与非门使能FIFO的WCK，将有效图像数据自动写入FIFO中。</p>\n</li>\n<li><strong>.当第二次VSYNC中断产生时，表明已经将一帧完整的图像写入FIFO</strong>，系统通过将<strong>FIFO_WEN</strong>置低，锁存一帧图像数据，实现图像的静态存储。此时，STM32F417送给FIFO的读时钟RCLK一个上升沿，将数据从FIFO中读出来，完成图像数据的实时采集与提取。</li>\n</ol>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_HdKevEgZfSA_p.88862_1388213982652_undefined" alt=""></p>\n<ul>\n<li>由于对摄像头工作参数的配置主要通过<strong>SCCB</strong>来实现，因此，在系统进行软件设计时，首先设计SCCB相关程序，进而通过SCCB设置摄像头的相关参数。</li>\n</ul>\n<p>其它 github參考範例:</p>\n<p><a href="https://github.com/desaster/ov7670test"></a><a href="https://github.com/desaster/ov7670test"><a href="https://github.com/desaster/ov7670test">https://github.com/desaster/ov7670test</a></a></p>\n<p><a href="https://github.com/ctc8631/ov7670"></a><a href="https://github.com/ctc8631/ov7670"><a href="https://github.com/ctc8631/ov7670">https://github.com/ctc8631/ov7670</a></a></p>\n<p><a href="https://github.com/Ursadon/ov7670-stm32"></a><a href="https://github.com/Ursadon/ov7670-stm32"><a href="https://github.com/Ursadon/ov7670-stm32">https://github.com/Ursadon/ov7670-stm32</a></a></p>\n\n';return __p},this.JST["app/scripts/templates/QCopterFlightControl_Reading_Note.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="qcopterflightcontrol-reading-note">QCopterFlightControl Reading Note</h1>\n<p>這個專頁為分享閱讀<a href="https://github.com/Hom19910422">Hom</a>的QCopterFlightControl的一些筆記。</p>\n<p>github: <a href="https://github.com/Hom19910422/QCopterFlightControl"></a><a href="https://github.com/Hom19910422/QCopterFlightControl">https://github.com/Hom19910422/QCopterFlightControl</a></p>\n<p>學習四軸飛行器基本知識</p>\n<p><a href="http://blog.oscarliang.net/build-a-quadcopter-beginners-tutorial-1/"></a><a href="http://blog.oscarliang.net/build-a-quadcopter-beginners-tutorial-1/"><a href="http://blog.oscarliang.net/build-a-quadcopter-beginners-tutorial-1/">http://blog.oscarliang.net/build-a-quadcopter-beginners-tutorial-1/</a></a></p>\n<p>姿態推導</p>\n<p><a href="http://www.freescale.com/files/sensors/doc/app_note/AN3461.pdf"></a><a href="http://www.freescale.com/files/sensors/doc/app_note/AN3461.pdf">http://www.freescale.com/files/sensors/doc/app_note/AN3461.pdf</a></p>\n<h2 id="-">如何讓飛控板一開始就進行穩定控制</h2>\n<p>因為原始作者使用自行設計的遙控器,但是我們並沒有這個遙控器,所以如果我們要用市售的rc遙控器必須用pwm input去控制系統給roll, pitch ,yaw,thrust，所以要先設計一個可以接受pwm訊號控制的軟體。</p>\n<ul>\n<li><p>在QCopterFC_transport.h這裡發現接收rf訊號時裡面有幾個參數是控制的參數</p>\n</li>\n<li><h1 id="define-exp_pitch-recvdata-20-">define Exp_Pitch   RecvData[20]</h1>\n</li>\n<li><h1 id="define-exp_roll-recvdata-21-">define Exp_Roll    RecvData[21]</h1>\n</li>\n<li><h1 id="define-exp_yaw-recvdata-22-">define Exp_Yaw     RecvData[22]</h1>\n</li>\n<li><h1 id="define-exp_thr-recvdata-23-">define Exp_Thr     RecvData[23]</h1>\n</li>\n<li><p>void SysTick_Handler( void )</p>\n</li>\n<li><p>/<em> Check Connection </em>/</p>\n</li>\n<li><a href="/ep/search/?q=%23define&amp;via=Shw0s5MqHBf"> </a><a href="https://embeddedcool.hackpad.com/ep/search/?q=%23define&amp;via=Shw0s5MqHBf">#define</a> NoSignal 1  // 1 sec</li>\n<li>if(KEYR_L == 0)</li>\n<li>Motor_Control(PWM_MOTOR_MIN, PWM_MOTOR_MIN, PWM_MOTOR_MIN, PWM_MOTOR_MIN);</li>\n<li>else if(((Time_Sec-RecvTime_Sec)&gt;NoSignal) || ((Time_Sec-RecvTime_Sec)&lt;-NoSignal))</li>\n<li>Motor_Control(PWM_MOTOR_MIN, PWM_MOTOR_MIN, PWM_MOTOR_MIN, PWM_MOTOR_MIN);</li>\n<li>else     </li>\n<li>Motor_Control(Final_M1, Final_M2, Final_M3, Final_M4);</li>\n</ul>\n<p>KEYR_L == 0為讓馬達設為最低轉速，經作者王文宏證實這個變數代表著關油門；第五至六行應為判斷無rf訊號也關油門。如果把這些都刪掉只留下第8行我們就可以讓飛控板一開始就可以進行平衡的控制</p>\n<h2 id="pwm">PWM</h2>\n<p>[<a href="http://www.360doc.com/content/11/0917/23/7736891_149119727.shtml">pwm教學</a> ]解釋多個PWM可由一個TIM控制</p>\n<p>PWM有兩種mode分別為模式1 模式2</p>\n<p>模式1</p>\n<p>脈衝寬度調製模式可以產生一個由TIMx_ARR寄存器確定頻率、由TIMx_CCRx寄存器確定占空比的信號。</p>\n<p>在TIMx_CCMRx寄存器中的OCxM位寫入’110’(PWM模式1)或’111’(PWM模式2)，能夠獨立地設置每個OCx輸出通道產生一路PWM。必須設置TIMx_CCMRx寄存器OCxPE位以使能相應的預裝載寄存器，最後還要設置TIMx_CR1寄存器的ARPE位使能自動重裝載的預裝載寄存器(在向上計數或中心對稱模式中)。</p>\n<p>在PWM模式(模式1或模式2)下，TIMx_CNT和TIM1_CCRx始終在進行比較，(依據計數器的計數方向)以確定是否符合TIM1_CCRx≤TIM1_CNT或者TIM1_CNT≤TIM1_CCRx。然而為了與OCREF_CLR的功能(在下一個PWM週期之前，ETR信號上的一個外部事件能夠清除OCxREF)一致，OCxREF信號只能在下述條件下產生：</p>\n<p>110：PWM模式1－在向上計數時，一旦TIMx_CNT<TIMx_CCR1時通道1為有效電平，否則為無效電平；在向下計數時，一旦TIMx_CNT>TIMx_CCR1時通道1為無效電平(OC1REF=0)，否則為有效電平(OC1REF=1)。</p>\n<p>111：PWM模式2－在向上計數時，一旦TIMx_CNT<TIMx_CCR1時通道1為無效電平，否則為有效電平；在向下計數時，一旦TIMx_CNT>TIMx_CCR1時通道1為有效電平，否則為無效電平。</p>\n<p>本例展示了如何設置TIM工作在脈衝寬度調製模式（PWM Pulse Width Modulation</p>\n<p>mode）。</p>\n<p>TIM3時鐘設置為36MHz，預分頻設置為0，TIM2計數器時鐘可表達為：</p>\n<p>TIM3 counter clock = TIMxCLK / (Prescaler +1) = 36 MHz</p>\n<p>設置TIM3_CCR1寄存器值為500，則TIM3通道1產生一個頻率為36MHz，占空比（duty cycle）為50%的PWM信號。</p>\n<p>同理，根據寄存器TIM3_CCR2 、TIM3_CCR3和 TIM3_CCR4的值，TIM3通道2產生一個頻率為36MHz，占空比（duty cycle）為37.5%的PWM信號；TIM3通道1產生一個頻率為36MHz，占空比（duty cycle）為25%的PWM信號；TIM3通道1產生一個頻率為36MHz，占空比（duty cycle）為12.5%的PWM信號。</p>\n<p>可以通過示波器，在相應管腳觀察到輸出信號。</p>\n<ul>\n<li>u16 CCR1_Val = 500;</li>\n<li>u16 CCR2_Val = 375;</li>\n<li>u16 CCR3_Val = 250;</li>\n<li>u16 CCR4_Val = 125;</li>\n<li></li>\n<li>TIM_TimeBaseStructure.TIM_Period = 999;         </li>\n<li>TIM_TimeBaseStructure.TIM_Prescaler = 0;      </li>\n<li>TIM_TimeBaseStructure.TIM_ClockDivision = 0;   </li>\n<li>TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;</li>\n<li>TIM_TimeBaseInit(TIM3, &amp;TIM_TimeBaseStructure);</li>\n<li>TIM_OCInitStructure.TIM_OCMode = TIM_OCMode_PWM1;         </li>\n<li>TIM_OCInitStructure.TIM_Channel = TIM_Channel_1;         </li>\n<li>TIM_OCInitStructure.TIM_Pulse = CCR1_Val; </li>\n<li>TIM_OCInitStructure.TIM_OCPolarity = TIM_OCPolarity_High;   </li>\n<li>TIM_OCInit(TIM3, &amp;TIM_OCInitStructure);</li>\n<li><em>启用CCR1寄存器的影子寄存器（直到产生更新事件才更改设置）</em></li>\n<li>TIM_OC1PreloadConfig(TIM3, TIM_OCPreload_Enable);</li>\n<li></li>\n<li>TIM_OCInitStructure.TIM_Channel = TIM_Channel_2;         </li>\n<li>TIM_OCInitStructure.TIM_Pulse = CCR2_Val; </li>\n<li></li>\n<li>TIM_OCInit(TIM3, &amp;TIM_OCInitStructure);</li>\n<li>TIM_OC2PreloadConfig(TIM3, TIM_OCPreload_Enable);</li>\n<li></li>\n<li>TIM_OCInitStructure.TIM_Channel = TIM_Channel_3;         </li>\n<li>TIM_OCInitStructure.TIM_Pulse = CCR3_Val; </li>\n<li></li>\n<li>TIM_OCInit(TIM3, &amp;TIM_OCInitStructure);</li>\n<li>TIM_OC3PreloadConfig(TIM3, TIM_OCPreload_Enable);</li>\n<li></li>\n<li>TIM_OCInitStructure.TIM_Channel = TIM_Channel_4;         </li>\n<li>TIM_OCInitStructure.TIM_Pulse = CCR4_Val; </li>\n<li></li>\n<li>TIM_OCInit(TIM3, &amp;TIM_OCInitStructure);</li>\n<li>TIM_OC4PreloadConfig(TIM3, TIM_OCPreload_Enable);</li>\n<li></li>\n<li>TIM_ARRPreloadConfig(TIM3, ENABLE);</li>\n<li></li>\n<li>TIM_Cmd(TIM3, ENABLE);</li>\n<li>while (1)</li>\n<li>{</li>\n<li>} </li>\n<li>}</li>\n</ul>\n<h2 id="-pwm-file">飛控板上的PWM宣告用到的file</h2>\n<ul>\n<li><p>module_motor.c file</p>\n</li>\n<li><p>GPIO_PinAFConfig(GPIOA, GPIO_PinSource6, GPIO_AF_TIM3);</p>\n</li>\n<li>GPIO_PinAFConfig(GPIOA, GPIO_PinSource7, GPIO_AF_TIM3);</li>\n<li>GPIO_PinAFConfig(GPIOB, GPIO_PinSource0, GPIO_AF_TIM3);</li>\n<li><p>GPIO_PinAFConfig(GPIOB, GPIO_PinSource1, GPIO_AF_TIM3);</p>\n</li>\n<li><p>module_motor.h file</p>\n</li>\n<li><h1 id="define-pwm_motor1-tim3-ccr1-pwm">define PWM_Motor1 TIM3-&gt;CCR1   // 無刷 PWM</h1>\n</li>\n<li><h1 id="define-pwm_motor2-tim3-ccr2-pwm">define PWM_Motor2 TIM3-&gt;CCR2   // 無刷 PWM</h1>\n</li>\n<li><h1 id="define-pwm_motor3-tim3-ccr3-pwm">define PWM_Motor3 TIM3-&gt;CCR3   // 無刷 PWM</h1>\n</li>\n<li><h1 id="define-pwm_motor4-tim3-ccr4-pwm">define PWM_Motor4 TIM3-&gt;CCR4   // 無刷 PWM</h1>\n</li>\n</ul>\n<p>CCR代表控制脈波寬度調變得週期大小 chanel</p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_Shw0s5MqHBf_p.94311_1385729095049_pwm" alt=""></p>\n<h2 id="-">飛控板開啟流程</h2>\n<h2 id="pwm-input-capture">PWM Input Capture</h2>\n<p>市售遙控器原理為:</p>\n<p>操作搖桿產生PWM singal -&gt;RF Modulation-&gt;RF Demodulation-&gt;PWM signal-&gt;飛控板</p>\n<p>所以要解析遙控器的訊號重點為如何處理PWM Input Capture-&gt;連結</p>\n\n';return __p},this.JST["app/scripts/templates/STM32F4_FreeRTOS.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="stm32f4-freertos-">STM32F4與FreeRTOS中斷</h1>\n<p>在開發途中發現許多幾個跟中斷的問題，我們要使用FreeRTOS就必須符合正確觸發中斷的條件。</p>\n<p>第一個也是最重要的就是－<strong>FreeRTOS的Task優先權(數字越大擁有越高優先權)和Cortex-M的中斷優先權(數字越小擁有越大優先權)是剛好顛倒的</strong>，這在FreeRTOS網站上強調很多次。</p>\n<p>第二個則是FreeRTOS建議Cortex-M架構的MCU使用只用搶佔優先權(preemption piority)沒有次要優先權(sub piority)的中斷，在使用ST LIB時必須在使用任何NVIC之前呼叫</p>\n<p>NVIC_PriorityGroupConfig(NVIC_PriorityGroup_4)</p>\n<p>這樣才能確保呼叫正確，以STM32F4例子來說我們有4bit的preemption level，0~15的優先權</p>\n<p>在FreeRTOSConfig.h有兩個選擇可以決定如何移植FreeRTOS的中斷</p>\n<ul>\n<li>configKERNEL_INTERRUPT_PRIORITY should be set to the lowest priority. <undefined><li><strong><u>1.For ports that only implement configKERNEL_INTERRUPT_PRIORITY</u></strong></li></undefined>\n\n</li>\n</ul>\n<p>configKERNEL_INTERRUPT_PRIORITY sets the interrupt priority <strong>used by the RTOS kernel itself</strong>.</p>\n<ul>\n<li>Interrupts that call API functions must also execute <strong>at this priority.</strong></li>\n<li>Interrupts that do not call API functions can  execute at higher priorities </li>\n<li>Interrupts that do not call API functions can execute  at higher priorities and therefore never have their execution delayed  by the RTOS kernel activity (within the limits of the hardware itself)</li>\n</ul>\n<undefined><li><strong><u>2.For ports that implement both configKERNEL_INTERRUPT_PRIORITY and configMAX_SYSCALL_INTERRUPT_PRIORITY</u></strong></li></undefined>\n\n<ul>\n<li>configKERNEL_INTERRUPT_PRIORITY sets the interrupt priority used by the RTOS kernel itself.  </li>\n<li>configMAX_SYSCALL_INTERRUPT_PRIORITY sets the <strong>highest interrupt priority</strong> from which interrupt <strong>safe FreeRTOS API functions </strong>can be called. </li>\n<li>A full interrupt nesting model is achieved by setting  configMAX_SYSCALL_INTERRUPT_PRIORITY above (that is, at a higher  priority level) than configKERNEL_INTERRUPT_PRIORITY.</li>\n<li><strong>This means the FreeRTOS kernel does not completely disable interrupts, even inside critical sections.</strong></li>\n<li>Interrupts that do not call API functions can execute  at priorities above configMAX_SYSCALL_INTERRUPT_PRIORITY and therefore  never be delayed by the RTOS kernel execution. </li>\n</ul>\n<p>Ex: 0 being the lowest and 7 being the highest</p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_b5vnsVtmVuw_p.88549_1388039125130_Interrupt-priorities-interrupt-nesting.jpg" alt=""></p>\n<p>To utilize this scheme your application design must adhere to the following rule: <strong>Any  interrupt that uses the FreeRTOS API must be set to the same priority  as the RTOS kernel (as configured by the configKERNEL_INTERRUPT_PRIORITY macro), or at or below  configMAX_SYSCALL_INTERRUPT_PRIORITY for ports that include this  functionality.</strong></p>\n<p>所有要用FreeRTOS API的中斷其優先權必須要同等於RTOS Kernel的中斷相等(<strong>configKERNEL_INTERRUPT_PRIORITY</strong>)或是優先權比<strong>configMAX_SYSCALL_INTERRUPT_PRIORITY低</strong></p>\n<p>從上的結論可以看出，在我們的例子使用了2的實現方式，這代表著中斷可以為不呼叫FreeRTOS的API或是呼叫FreeRTOS的API。也可以分成優先權比<strong>configMAX_SYSCALL_INTERRUPT_PRIORITY</strong>高或低。</p>\n<p><strong>Tasks 流程</strong></p>\n<p><a href="http://www.freertos.org/RTOS-task-states.html"></a><a href="http://www.freertos.org/RTOS-task-states.html">http://www.freertos.org/RTOS-task-states.html</a></p>\n<p>vTaskResume() &amp; vTaskSuspend() 的使用</p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_b5vnsVtmVuw_p.88862_1388901188242_tskstate.gif" alt=""></p>\n<h2 id="semaphore">Semaphore</h2>\n<p><a href="http://www.socialledge.com/sjsu/index.php?title=FreeRTOS_Tutorial" title="FreeRTOS_Tutorial"></a><a href="http://www.socialledge.com/sjsu/index.php?title=FreeRTOS_Tutorial">http://www.socialledge.com/sjsu/index.php?title=FreeRTOS_Tutorial</a></p>\n<p>*</p>\n<p><a href="http://www.youtube.com/watch?v=grXuVMttVuU"></a><a href="http://www.youtube.com/watch?v=grXuVMttVuU">http://www.youtube.com/watch?v=grXuVMttVuU</a></p>\n\n';
return __p},this.JST["app/scripts/templates/STM32_timer_input_capture.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="-stm32-timer-input-capture-pwm-">如何用STM32 Timer Input Capture  計算 PWM訊號寬度</h1>\n<p>　　雖然STM32可以使用PWM Input Capture簡單的去計算PWM的脈波頻率以及其Duty Cycle，但是會遇到一個問題，開啟PWM Input Capture會占用兩個Timer的通道，這樣如果我想要接收五動的遙控器訊號，這樣會用到5個Timer，這樣會浪費太多Timer而且實際面我們飛控板並沒有這麼多接腳。</p>\n<ul>\n<li>在我實驗中只有開啟Timer4然後使用CH1和CH2的CCR</li>\n</ul>\n<p>　　第一，我們要知道RC訊號控制機器的重點為高電位的時間(Pulse Width)，頻率反而不是我們所需要注重的地方，所以我只需要去抓取高電位的時間。第二，Timer Input Capture有三種模式可以觸發，Rising,Falling,BothEdge，如果我利用計算的方式或者改變觸發條件的Polarity就可以計算出脈波寬。第三個要注意到Time Base和計數器CCR，Timebase 一定要比PWM頻率高(取樣定理)，還有計數器是否會Overflow。</p>\n<p>*</p>\n\n';return __p},this.JST["app/scripts/templates/Sublime_tutorial.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="-sublime-http-www-sublimetext-com-"><a href="http://www.sublimetext.com/">Sublime</a> 教學</h1>\n<p>在Linux裡，如果只會用vim，其實非常的不方便，sublime是一個很強大的免費軟體, 有點類似Keil C , 它可以直接幫你<strong> trace code跳入底層的函式</strong>,  讓開發者方便許多，但sublime剛開始的設定有點複雜，所以在此敘述安裝後的設定流程。</p>\n<p>Sublime 2官網下載：</p>\n<p><a href="http://www.sublimetext.com/2"></a><a href="http://www.sublimetext.com/2"><a href="http://www.sublimetext.com/2">http://www.sublimetext.com/2</a></a></p>\n<p>下載CSCOPE ：<a href="https://github.com/ameyp/CscopeSublime/archive/master.zip"></a><a href="https://github.com/ameyp/CscopeSublime/archive/master.zip"><a href="https://github.com/ameyp/CscopeSublime/archive/master.zip">https://github.com/ameyp/CscopeSublime/archive/master.zip</a></a></p>\n<p>下載ctags :<a href="https://github.com/SublimeText/CTags/archive/master.zip"></a><a href="https://github.com/SublimeText/CTags/archive/master.zip"><a href="https://github.com/SublimeText/CTags/archive/master.zip">https://github.com/SublimeText/CTags/archive/master.zip</a></a></p>\n<p>建議都是放在跟Sublime Text 2同一個目錄下.</p>\n<undefined><li><strong>step1</strong></li></undefined>\n\n<p>1) 打開sublime_text,進去後, <u>ctrl + `</u> 叫出 console</p>\n<p>2) 複製以下內容到console command line</p>\n<hr>\n<p>import urllib2,os; pf=&#39;Package Control.sublime-package&#39;; ipp=sublime.installed_packages_path(); os.makedirs(ipp) if not os.path.exists(ipp) else None; urllib2.install_opener(urllib2.build_opener(urllib2.ProxyHandler())); open(os.path.join(ipp,pf),&#39;wb&#39;).write(urllib2.urlopen(&#39;<a href="http://sublime.wbond.net/"></a><a href="http://sublime.wbond.net/&#39;+pf.replace(">http://sublime.wbond.net/&#39;+pf.replace(</a>&#39; &#39;,&#39; &#39;)).read()); print &#39;Please restart Sublime Text to finish installation&#39;</p>\n<hr>\n<p>3) 看到結束之後,關掉重開Sublime Text 2</p>\n<p>4) 在工作列就可以看到 Preferences -&gt; Pacakge Control ,表示安裝成功</p>\n<p><strong>step2</strong></p>\n<p>Preferences -&gt; Package Control,執行之後可以看到畫面<u>Package Control ：</u></p>\n<p>直接打上ｉ，然後選第一個 <u>Package Control ：install package</u> 等待幾分鐘會出現畫面</p>\n<p>再打上ctags  按下去就對了,安裝好在重開</p>\n<p><strong>step3</strong></p>\n<p>再到終端機打上：  </p>\n<p>sudo apt-get install cscope（安裝cscope）</p>\n<p>sudo apt-get install ctags（安裝ctags）</p>\n<p><strong>step4</strong></p>\n<p>到終端機打cscope -b -q -k -R 可建立cscope</p>\n<p>到sublime工作列 Find-&gt; CTags -&gt; Rebuild Tags 可建立ctags</p>\n<p>參考連結：</p>\n<p><a href="http://villprog.blogspot.tw/2013/04/sublime-text-2.html"></a><a href="http://villprog.blogspot.tw/2013/04/sublime-text-2.html"><a href="http://villprog.blogspot.tw/2013/04/sublime-text-2.html">http://villprog.blogspot.tw/2013/04/sublime-text-2.html</a></a></p>\n<p><a href="http://villprog.blogspot.tw/2013/04/sublime-text-2.html"></a><a href="http://villprog.blogspot.tw/2013/04/sublime-text-2.html"><a href="http://villprog.blogspot.tw/2013/04/sublime-text-2.html">http://villprog.blogspot.tw/2013/04/sublime-text-2.html</a></a></p>\n<p><a href="http://blog.csdn.net/thunderclaus/article/details/11556159"></a><a href="http://blog.csdn.net/thunderclaus/article/details/11556159"><a href="http://blog.csdn.net/thunderclaus/article/details/11556159">http://blog.csdn.net/thunderclaus/article/details/11556159</a></a></p>\n<p><a href="http://cloverhsc.blogspot.tw/2013/09/sublime-text-ccide-in-windows3-ctags.html"></a><a href="http://cloverhsc.blogspot.tw/2013/09/sublime-text-ccide-in-windows3-ctags.html"><a href="http://cloverhsc.blogspot.tw/2013/09/sublime-text-ccide-in-windows3-ctags.html">http://cloverhsc.blogspot.tw/2013/09/sublime-text-ccide-in-windows3-ctags.html</a></a></p>\n\n';return __p},this.JST["app/scripts/templates/code_discuss.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="-">程式討論</h1>\n<h2 id="make-openocd-">make openocd 使用教學</h2>\n<p>有時候程式碼雖然編過了, 但居然還是錯的, 所以我們可以利用make openocd 來讓gdbauto可以對我們的STM32F4Discovery進行除錯.</p>\n<p>step1. 到<a href="http://wiki.csie.ncku.edu.tw/embedded/Lab24">成大資工wiki Lab24</a>下載openocd</p>\n<p>step2. 都下載完後, 必須設定路徑：vim ~/.bashrc　</p>\n<p>　　　進去後最下面打上　<strong>export PATH=/opt/openocd/bin:$PATH</strong></p>\n<p>step3. 在make 後, 打上make openocd   (一定要先make才有elf)</p>\n<p>step4. 按 [<strong>ctrl+shift+t</strong> ] (進入另一個終端機)</p>\n<p>step5. 打 <strong>make gdbauto</strong>  (即可看到除錯畫面)</p>\n<p>step6. 打 <strong>monitor reset halt</strong>  或按 reset 鈕  (讓系統重置)</p>\n<ul>\n<li>如果停在xxxstartup.s的檔案代表正確重開，可以重新debug</li>\n</ul>\n<p>step7. 可以看到直接進入中斷點  （前提必須在 <strong>.gdb</strong>的檔案設置好）</p>\n<ul>\n<li>gdb script</li>\n</ul>\n<p>step8. 利用usart 配合 gdb裡的<strong>print</strong> 可以直接在usart觀察變數的變化 </p>\n<p>補充<a href="https://www.facebook.com/download/1440219162873171/refcard.pdf">：GDB cheat sheet</a>（gdb的指令使用）</p>\n<h2 id="coding-style">Coding Style</h2>\n<p><strong>如何使用astyle自動排版?</strong></p>\n<p>1.下載astyle</p>\n<p><a href="http://downloads.sourceforge.net/project/astyle/astyle/astyle%202.04/astyle_2.04_linux.tar.gz?r=http%3A%2F%2Fsourceforge.net%2Fprojects%2Fastyle%2Ffiles%2Fastyle%2Fastyle%25202.04%2F&amp;ts=1386641171&amp;use_mirror=jaist"></a><a href="http://downloads.sourceforge.net/project/astyle/astyle/astyle%202.04/astyle_2.04_linux.tar.gz?r=http%3A%2F%2Fsourceforge.net%2Fprojects%2Fastyle%2Ffiles%2Fastyle%2Fastyle%25202.04%2F&amp;ts=1386641171&amp;use_mirror=jaist">http://downloads.sourceforge.net/project/astyle/astyle/astyle%202.04/astyle_2.04_linux.tar.gz?r=http%3A%2F%2Fsourceforge.net%2Fprojects%2Fastyle%2Ffiles%2Fastyle%2Fastyle%25202.04%2F&amp;ts=1386641171&amp;use_mirror=jaist</a></p>\n<p>2.編譯檔案</p>\n<p>解壓縮檔案後，到astyle資料夾下的/astyle/build/gcc打入指令</p>\n<p>make</p>\n<p>會看到該資料夾下面多了bin及obj資料夾</p>\n<p>3.移動檔案到usr/local</p>\n<p>sudo cp ./astyle /usr/local/bin/astyle</p>\n<p>4.設定astyle參數</p>\n<p>vim ~/.astylerc</p>\n<ul>\n<li>style=linux</li>\n<li>indent=force-tab=8</li>\n<li>indent-cases</li>\n<li>indent-preprocessor</li>\n<li>break-blocks=all</li>\n<li>pad-oper</li>\n<li>pad-header</li>\n<li>unpad-paren</li>\n<li>keep-one-line-blocks</li>\n<li>keep-one-line-statements</li>\n<li>align-pointer=name</li>\n<li>align-reference=name</li>\n<li>suffix=none</li>\n<li>ignore-exclude-errors-x</li>\n<li>lineend=linux</li>\n<li>exclude=EASTL</li>\n</ul>\n<p>5.利用astyle自動排版   </p>\n<ul>\n<li>Example to format a single file:  </li>\n<li><p>astyle    /home/user/project/foo.cpp</p>\n</li>\n<li><p>Example to format all .cpp and .h files recursively:     </p>\n</li>\n<li><p>astyle   --recursive  /home/user/project/<em>.cpp  /home/user/project/</em>.h</p>\n<p><a href="http://astyle.sourceforge.net/astyle.html#_Quick_Start"></a><a href="http://astyle.sourceforge.net/astyle.html#_Quick_Start">http://astyle.sourceforge.net/astyle.html#_Quick_Start</a>   </p>\n<p><a href="https://pixhawk.ethz.ch/px4/dev/code_style"></a><a href="https://pixhawk.ethz.ch/px4/dev/code_style">https://pixhawk.ethz.ch/px4/dev/code_style</a></p>\n<p><strong>變數宣告</strong></p>\n<p>下列例如s32及s16不建議使用，此為舊的變數型態，統一使用int32_t(左側)尚未typedef的型態</p>\n</li>\n<li><p>/<em>!&lt; STM32F10x Standard Peripheral Library old types (maintained for legacy purpose) </em>/</p>\n</li>\n<li>typedef int32_t  s32;</li>\n<li>typedef int16_t s16;</li>\n<li>typedef int8_t  s8;\n<em>*   typedef const int32_t sc32;  /</em>!&lt; Read Only */</li>\n<li>typedef const int16_t sc16;  /<em>!&lt; Read Only </em>/</li>\n<li>typedef const int8_t sc8;   /<em>!&lt; Read Only </em>/\n**   typedef __IO int32_t  vs32;</li>\n<li>typedef __IO int16_t  vs16;</li>\n<li>typedef <strong>IO int8_t   vs8;\n**   typedef </strong>I int32_t vsc32;  /<em>!&lt; Read Only </em>/</li>\n<li>typedef __I int16_t vsc16;  /<em>!&lt; Read Only </em>/</li>\n<li>typedef __I int8_t vsc8;   /<em>!&lt; Read Only </em>/\n**   typedef uint32_t  u32;</li>\n<li>typedef uint16_t u16;</li>\n<li>typedef uint8_t  u8;</li>\n<li></li>\n<li>typedef const uint32_t uc32;  /<em>!&lt; Read Only </em>/</li>\n<li>typedef const uint16_t uc16;  /<em>!&lt; Read Only </em>/</li>\n<li>typedef const uint8_t uc8;   /<em>!&lt; Read Only </em>/    </li>\n<li>typedef __IO uint32_t  vu32;</li>\n<li>typedef __IO uint16_t vu16;</li>\n<li>typedef __IO uint8_t  vu8;</li>\n<li>typedef __I uint32_t vuc32;  /<em>!&lt; Read Only </em>/</li>\n<li>typedef __I uint16_t vuc16;  /<em>!&lt; Read Only </em>/</li>\n<li>typedef __I uint8_t vuc8;   /<em>!&lt; Read Only </em>/</li>\n</ul>\n<h2 id="-">自訂型態</h2>\n<p><a href="http://www.cmlab.csie.ntu.edu.tw/~perng/course/chap5/chap5.html"></a><a href="http://www.cmlab.csie.ntu.edu.tw/~perng/course/chap5/chap5.html">http://www.cmlab.csie.ntu.edu.tw/~perng/course/chap5/chap5.html</a></p>\n<p>printf(&quot;%d, %s&quot;, v, str); 如果自己想寫【動態引數】該怎麼寫？</p>\n<p><a href="http://blog.udn.com/cchahacaptain/2238613"></a><a href="http://blog.udn.com/cchahacaptain/2238613">http://blog.udn.com/cchahacaptain/2238613</a></p>\n<ul>\n<li><h1 id="include-stdio-h-">include <stdio.h></h1>\n**   struct foo {</li>\n<li>int test;</li>\n<li>};\n<em>*   int f(struct foo </em>foo_input)</li>\n<li>{</li>\n<li>printf(&quot;%d\\n&quot;, (*foo_input).test); // = printf(&quot;%d\\n&quot;, foo_input-&gt;test);</li>\n<li>}\n**   int main()</li>\n<li>{</li>\n<li>struct foo foo1;</li>\n<li>foo1.test = 1;\n**     f(&amp;foo1);</li>\n<li>return 0;</li>\n<li>}</li>\n</ul>\n<h2 id="makefile-">makefile教學</h2>\n<p><a href="http://kevincrazy.pixnet.net/blog/post/29780477-makefile%E7%B0%A1%E6%98%93%E6%95%99%E5%AD%B8"></a><a href="http://kevincrazy.pixnet.net/blog/post/29780477-makefile%E7%B0%A1%E6%98%93%E6%95%99%E5%AD%B8">http://kevincrazy.pixnet.net/blog/post/29780477-makefile%E7%B0%A1%E6%98%93%E6%95%99%E5%AD%B8</a>...</p>\n<p><a href="http://tetralet.luna.com.tw/?op=ViewArticle&amp;articleId=185"></a><a href="http://tetralet.luna.com.tw/?op=ViewArticle&amp;articleId=185">http://tetralet.luna.com.tw/?op=ViewArticle&amp;articleId=185</a></p>\n<p>gcc</p>\n<p>gcc教學 vim makefile</p>\n<p>CC = gcc</p>\n<p>BIN = test</p>\n<p>all:test.c</p>\n<pre><code>    $(CC) -o $(BIN) test.c</code></pre>\n<p>clean:</p>\n<pre><code>    rm -f $(BIN)</code></pre>\n<p>.PHONY:clean</p>\n\n';return __p},this.JST["app/scripts/templates/global_structure.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="global-structure-">global structure 變數解釋</h1>\n<p>enum </p>\n<p>   {</p>\n<pre><code>    PWM1_CCR=0, //pwm input capture connect to radio control ch1\n\n    PWM2_CCR, //pwm input capture connect to radio control ch2\n\n    PWM3_CCR,//pwm input capture connect to radio control ch3\n\n    PWM4_CCR,//pwm input capture connect to radio control ch4\n\n    PWM5_CCR,//pwm input capture connect to radio control ch5\n\n    RC_EXP_ROLL,//expectation  of roll angle\n\n    RC_EXP_PITCH,//expectation  of pitch angle\n\n    RC_EXP_YAW,//expectation  of yaw angle\n\n    RC_EXP_THR,//expectation  of throttle value\n\n    TRUE_ROLL,//the roll angle which calculate by AHRS\n\n    TRUE_PITCH,//the roll angle which calculate by AHRS\n\n    TRUE_YAW,//the roll angle which calculate by AHRS\n\n    NO_RC_SIGNAL_MSG,//No radio control signal status\n\n    PID_ROLL,//the value of pid output, this directly means PWM CCR\n\n    PID_PITCH,//the value of pid output, this directly means PWM CCR\n\n    PID_YAW,//the value of pid output, this directly means PWM CCR\n\n    MOTOR1,//Motor 1 CCR(PWM9 )\n\n    MOTOR2,//Motor 2 CCR(PWM10)\n\n    MOTOR3,//Motor 3 CCR(PWM11)\n\n    MOTOR4,//Motor 4 CCR(PWM12)\n\n    GLOABAL_PARAM_COUNT</code></pre>\n<p>};</p>\n\n';return __p},this.JST["app/scripts/templates/intro.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="quadcopterflightcontrol">QuadcopterFlightControl</h1>\n<p>This is a quadcopter flight control board base on <a href="https://github.com/Hom19910422/QCopterFlightControl">QCopterFlightControl2.0</a>.    In this version, we design new software which include FreeRTOS, a kind of real-time OS. That means we could manage manay task and implement mult-thread application. User can see the sensor status when you try to design or monitor you rotor. A special designed shell enironment could help user to send some command or do some actions on rotors.</p>\n<iframe width="560" height="315" src="//www.youtube.com/embed/_L0hhZS_mhM" frameborder="0" allowfullscreen></iframe>\n<iframe width="560" height="315" src="//www.youtube.com/embed/Qm8GnarqmA8" frameborder="0" allowfullscreen></iframe>\n\n<h1 id="features">Features</h1>\n<ul>\n<li>Support commercial R/C remoter(Futaba R/C)</li>\n<li>Support linenoise text editing environment with a Shell</li>\n<li>Online tuning PID parameters</li>\n<li>Report the status of the QuadCopter</li>\n</ul>\n<h1 id="shell-commands">Shell commands</h1>\n<ul>\n<li>clear - Clear the screen</li>\n<li>help - The informations of the shell</li>\n<li>monitor - A QuadCopter Status Monitor</li>\n<li>ps - Show all processes [Block]</li>\n</ul>\n<h1 id="quadcopter-status-monitor">QuadCopter Status Monitor</h1>\n<p>After enable the command line, you can type :</p>\n<ul>\n<li>resume - Disable the commandline mode</li>\n<li>reset - Drop the unsaved settings<ul>\n<li>reset [quadcopter parameter] / reset all</li>\n</ul>\n</li>\n<li>quit - Quit the monitor</li>\n<li>help - The QuadCopter Status Monitor Manual</li>\n<li>set - Set the parameter of the quadcopter<pre><code>- set [quadcopter parameter] [value] / set update</code></pre>\n</li>\n</ul>\n<h1 id="linenoise-hotkeys">Linenoise hotkeys</h1>\n<ul>\n<li>To get more informations, please read the LINENOISE.md</li>\n</ul>\n<h1 id="license">License</h1>\n<ul>\n<li><p>The <a href="https://github.com/Hom19910422/QCopterFlightControl">QCopterFlightControl</a> project is auorized by <a href="Hom19910422@gmail.com">Hom19910422</a></p>\n</li>\n<li><p>The <a href="https://github.com/antirez/linenoise">lineoise</a> is auorized under BSD License and release by <a href="antirez@gmail.com">antirez</a></p>\n</li>\n</ul>\n\n';return __p},this.JST["app/scripts/templates/mk.ejs"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+=(null==(__t=content)?"":__t)+"\n";return __p},this.JST["app/scripts/templates/moter.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="-">直流無刷馬達原理</h1>\n<p>直流無刷馬達的設計，主要是解決直流馬達的電刷與換相器的維護問題。其動作原理與有刷式直流馬達最大的不同，在於改以<strong>電子式的換相</strong>，而使達到轉子與定子磁場保持在 90 相位差的目的，在配合適當的驅動電路、有效控制換相時序，可以提高效率或增加轉速範圍。無刷馬達是靠線圈產生磁場讓電樞運轉，因為少了電刷與軸的摩擦因此較省電也比較安靜.</p>\n<p>實際馬達硬體的設計上，一般直流無刷馬達的轉子採<strong>用永久磁鐵</strong>，定子上則繞以<strong>三相</strong>的線圈。</p>\n<p><strong>有刷與無刷的比較：</strong></p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_Y38T9JXygI8_p.88862_1385573045457_%E6%9C%AA%E5%91%BD%E5%90%8D.bmp" alt=""></p>\n<p><strong>直流無刷馬達驅動原理</strong> ：</p>\n<ul>\n<li>最基本之驅動法為<strong>120˚導電方式</strong> (亦即<strong>六步驅動模式</strong>) </li>\n<li>將6個IGBT施以單純之<strong>ON/OFF控制信號</strong>。 </li>\n</ul>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_Y38T9JXygI8_p.88862_1385573580974_%E6%9C%AA%E5%91%BD%E5%90%8D.bmp" alt=""></p>\n\n';return __p},this.JST["app/scripts/templates/nRF24L01.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="nrf24l01-">nRF24L01無線模組</h1>\n<p><img src="http://www.micro4you.com/files/itead/NRF24L01.JPG" alt=""></p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_9tVeioOBKG7_p.88549_1388992064031_QCopterFC_Config_PIN.png" alt=""></p>\n<p>Pin CE(PC4) Chip Enable Activates RX or TX mode</p>\n<p><a href="http://www.micro4you.com/files/itead/NRF24L01.JPG"></a><a href="http://www.micro4you.com/files/itead/NRF24L01.JPG">http://www.micro4you.com/files/itead/NRF24L01.JPG</a></p>\n<p>在此專案有兩個類似的傳輸方式：</p>\n<ul>\n<li><strong>I2C</strong> 給 ms5611 (氣壓感測器) 傳輸用的</li>\n<li><strong>SPI</strong> 給 nrf24l01（RF模組) 傳輸用的</li>\n</ul>\n<p>－－－－－－－－－－－－－－－－－－－－－－</p>\n<p>這裡先介紹nrf24l01部份</p>\n<p>[<a href="http://www.nordicsemi.com/eng/content/download/2730/34105/file/nRF24L01_Product_Specification_v2_0.pdf">nRF24L01-Datasheet</a>]    </p>\n<p>[<a href="http://baike.baidu.com/view/3325625.htm">參考連結</a>]     </p>\n<p>[<a href="http://www.you01.com/forum.php?mod=viewthread&amp;tid=2454&amp;extra=">相關文獻</a>]   </p>\n<p>[<a href="http://www.docin.com/p-419744496.html">nRF教學</a> ]</p>\n<p>github: [<a href="https://github.com/zxc2694/QuadrotorGroundStation"> QuadrotorGroundStation</a> ]</p>\n<p><strong>note：</strong></p>\n<ul>\n<li>必須使用<strong>3.3V</strong> 做為電源, 因為nRF24L01的工作電壓是1.9~3.6V，使用5V的電壓會把模組燒壞。</li>\n<li><p>此飛控板用的是<strong>SPI2的腳位。</strong></p>\n</li>\n<li><p><strong>CSN、SCK、MISO、MOSI　屬於SPI 腳位</strong></p>\n</li>\n<li><strong>CE：使能發射或接收</strong></li>\n<li><strong>IRQ：中斷旗標</strong></li>\n<li>參考stm32F4 Datasheet  <strong>P.51</strong> （有說明SPI2 屬於哪隻腳位）</li>\n</ul>\n<h2 id="-">模組腳位說明</h2>\n<table style="font-size:13px;cell-spacing: 0px; border-collapse: collapse;"><tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Pin</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#21517;&#31281;</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#33139;&#20301;&#21151;&#33021;</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#25551;&#36848;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">1</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">CE</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Digital Input</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">RX&#25110;TX&#27169;&#24335;&#36873;&#25321;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">2</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">CSN</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Digital Input</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">SPI&#29255;&#36873;&#20449;&#21495;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">3</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">SCK</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Digital Input</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">SPI&#26102;&#38047;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">4</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">MOSI</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Digital Input</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#20174;SPI&#25968;&#25454;&#36755;&#20837;&#33050;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">5</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">MISO</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Digital Input</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#20174;SPI&#25968;&#25454;&#36755;&#20986;&#33050;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">6</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">IRQ</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Digital Input</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#21487;&#23631;&#34109;&#20013;&#26029;&#33050;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">7</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">VDD</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#30005;&#28304;</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#30005;&#28304;&#65288;+3V&#65289;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">8</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">VSS</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#30005;&#28304;</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#25509;&#22320;&#65288;0V&#65289;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">9</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">XC2</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Analog Output</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#26230;&#20307;&#25391;&#33633;&#22120;2&#33050;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">10</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">XC1</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Analog Input</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#26230;&#20307;&#25391;&#33633;&#22120;1&#33050;/&#22806;&#37096;&#26102;&#38047;&#36755;&#20837;&#33050;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">11</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">VDD-PA</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#30005;&#28304;&#36755;&#20986;</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#32473;RF&#30340;&#21151;&#29575;&#25918;&#22823;&#22120;&#25552;&#20379;&#30340;+1.8V&#30005;&#28304;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">12</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">ANT1</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#22825;&#32447;</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#22825;&#32447;&#25509;&#21475;1</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">13</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">ANT2</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#22825;&#32447;</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#22825;&#32447;&#25509;&#21475;2</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">14</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">VSS</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#30005;&#28304;</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#25509;&#22320;&#65288;0V&#65289;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">15</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">VDD</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#30005;&#28304;</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#30005;&#28304;&#65288;+3V&#65289;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">16</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">IREP</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">Analog Input</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#21442;&#32771;&#30005;&#27969;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">17</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">VSS</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#30005;&#28304;</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#25509;&#22320;&#65288;0V&#65289;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">18</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">VDD</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#30005;&#28304;</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#30005;&#28304;&#65288;+3V&#65289;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">19</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">DVDD</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#30005;&#28304;&#36755;&#20986;</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#21435;&#32806;&#30005;&#36335;&#30005;&#28304;&#27491;&#26497;&#31471;</td>\n</tr>\n<tr><td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">20</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">VSS</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#30005;&#28304;</td>\n<td style="border:1px solid #999; min-width: 50px;height: 22px;line-height: 16px;padding: 0 4px 0 4px;" class="added">&#25509;&#22320;&#65288;0V&#65289;</td>\n</tr>\n</table>\n\n<p><strong>晶片：</strong></p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_9tVeioOBKG7_p.88862_1386941196447_ic.png" alt=""></p>\n<p><strong>模組：</strong></p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_9tVeioOBKG7_p.88862_1386942041316_pcb.png" alt=""></p>\n<h2 id="-">方塊圖</h2>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_9tVeioOBKG7_p.88862_1386647526551_rf.png" alt=""></p>\n<h2 id="-rf-nrf24l01-">與RF模組(nrf24l01)有關的程式碼</h2>\n<p><strong>QCopterFC_transport.c</strong></p>\n<ul>\n<li>兩個副函式：</li>\n</ul>\n<p>void Transport_Recv( u8* RecvBuf )                            // 用來紀錄接收資料</p>\n<p>void Transport_Send( u8* SendBuf )                            // 用來紀錄發送資料</p>\n<p><strong>module_nrf24l01.c</strong></p>\n<ul>\n<li>十個副函式：</li>\n</ul>\n<p>void nRF24L01_Config( void )                                                  //初始化設定</p>\n<p>void nRF_WriteReg( u8 WriteAddr, u8 WriteData )                      //寫暫存器</p>\n<p>u8 nRF_ReadReg( u8 ReadAddr )                                               //讀暫存器</p>\n<p>void nRF_WriteBuf( u8 WriteAddr, u8 *WriteBuf, u8 Bytes ) //連續寫暫存器</p>\n<p>void nRF_ReadBuf( u8 ReadAddr, u8 *ReadBuf, u8 Bytes ) //連續讀暫存器</p>\n<p>void nRF_RX_Mode( void )                                                   //轉成接收模式</p>\n<p>void nRF_TX_Mode( void )                                                   //轉成發射模式</p>\n<p>u8 nRF_Check( void )                                 // 檢測是否MCU與NRF成功連接</p>\n<p>u8 nRF_Tx_Data( u8 *TxBuf )                                                      //傳送資料</p>\n<p>u8 nRF_Rx_Data( u8* )                                                                //接收資料</p>\n<p><strong>stm32f4_spi.c</strong></p>\n<ul>\n<li>兩個副函式：</li>\n</ul>\n<p><s>u8 SPI_RW( SPI_TypeDef* SPIx, u8 WriteByte )             //接收1Byte的資料</s></p>\n<p>void SPI_WriteByte( SPI_TypeDef* SPIx, u8 WriteByte ) //傳送1Byte的資料</p>\n<p>u8 SPI_ReadByte( SPI_TypeDef* SPIx )                        //接收1Byte的資料</p>\n<ul>\n<li>SPI_RW與SPI_WriteByte只是差在於一個有return一個沒有, 其實stm32f4_spi.c程式有點問題,因為三個副函式內容幾乎一樣</li>\n</ul>\n<hr>\n<p>讀寫的副函式（module_nrf24l01.c）</p>\n<ul>\n<li>傳輸方式都是先寫入一個address,在給他一個資料 ,在將NRF_CSN旗標設為1,即可送出去</li>\n</ul>\n<p>void <strong>nRF_WriteReg</strong>( u8 WriteAddr, u8 WriteData )</p>\n<p>{</p>\n<p>  NRF_CE = 0;</p>\n<p>  NRF_CSN = 0;</p>\n<p>  SPI_WriteByte(nRF_SPI, WriteAddr);</p>\n<p>  SPI_WriteByte(nRF_SPI, WriteData);</p>\n<p>  NRF_CSN = 1;</p>\n<p>}</p>\n<p>u8 <strong>nRF_ReadReg</strong>( u8 ReadAddr )</p>\n<p>{</p>\n<p>  u8 ReadData;</p>\n<p>  NRF_CE = 0;</p>\n<p>  NRF_CSN = 0;</p>\n<p>  SPI_WriteByte(nRF_SPI, ReadAddr);</p>\n<p>  ReadData = SPI_ReadByte(nRF_SPI);</p>\n<p>  NRF_CSN = 1;</p>\n<p>  return ReadData;</p>\n<p>}</p>\n<ul>\n<li>在<strong>QCopterFC.c</strong>主要利用</li>\n<li><strong> nRF_TX_Mode、nRF_Tx_Data、nRF_RX_Mode、 nRF_Rx_Data</strong> 四個副函式</li>\n<li>來實現收發控制</li>\n</ul>\n<p>/<strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong> FSM Tx <strong><strong><strong><strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong></strong></strong></strong>/</p>\n<pre><code>case FSM_Tx:\n\n  // FSM_Tx\n\n  **nRF_TX_Mode**();                                    //轉成發射模式\n\n  do {\n\n    Sta = **nRF_Tx_Data**(TxBuf[0]);            //傳送資料\n\n  } while(Sta == MAX_RT);\n\n  // FSM_Tx End\n\n  FSM_State = FSM_Rx;\n\n  break;\n\n/************************** FSM Rx ****************************************/\n\ncase FSM_Rx:\n\n  // FSM_Rx\n\n ** nRF_RX_Mode**();                                 //轉成接收模式\n\n  Sta = **nRF_Rx_Data**(RxBuf[0]);           //接收資料\n\n  if(Sta == RX_DR) {\n\n    Transport_Recv(RxBuf[0]);\n\n  }\n\n  // FSM_Rx End\n\n  FSM_State = FSM_CTRL;\n\n  break;</code></pre>\n<p><strong>補充：</strong></p>\n<p>[<a href="http://blog.sina.com.cn/s/blog_9eb7f83f0101517g.html">其它模組nRF2401AG</a>]</p>\n<p>[<a href="http://pdf1.alldatasheet.com/datasheet-pdf/view/144036/ETC1/NRF2401AG.html">nRF2401AG Datasheet</a> ]</p>\n<p>[<a href="https://sites.google.com/site/playrobotquickstart/home/xbee-wu-xian-tao-jian">xbee</a> ]</p>\n\n';
return __p},this.JST["app/scripts/templates/post.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="-"><strong>四軸飛高高海報專區</strong></h1>\n<h2 id="-">內容</h2>\n<p>指導老師:黃敬群</p>\n<p>組員:黃大峯、劉政德、楊承翰、鄭聖文</p>\n<p>摘要：本專題以<a href="http://www.st.com/web/catalog/mmc/FM141/SC1169/SS1577/LN1035/PF252144">STM32F405R</a>G(ARM Cortex M4)為基礎嵌入式系統架構，在Linux環境下開發四軸飛行器，移植FreeRTOS作業系統到飛控板，並經由飛控板進行控制，過程中透過PWM輸入訊號控制四顆無刷直流馬達(BLDC)，藉由三軸陀螺儀與三軸加速規計算其姿態角，再經由PID控制器來控制其姿態達成穩定的飛行模式。</p>\n<p>功能：</p>\n<p>· Support commercial R/C remoter(Futaba)</p>\n<p>· Support linenoise text editing environment with a Shell</p>\n<p>· Shell commands </p>\n<p>· QuadCopter status monitor</p>\n<p>· Online tuning PID parameter</p>\n<p>· Save information in SD Card</p>\n<p>圖片文字大約位置擺放：</p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_NcfzuQiG05v_p.88862_1388810374493_ok.png" alt=""></p>\n<p> P.S.目前缺四軸實體圖看還需要什麼圖這邊貼給我,word集中我這邊修改</p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_NcfzuQiG05v_p.88862_1388753275463_DSCF4390.JPG" alt=""></p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_NcfzuQiG05v_p.88862_1388810408799_DSCF4391.JPG" alt=""></p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_NcfzuQiG05v_p.94311_1388655126576_QCopterFC_System.png" alt=""></p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_NcfzuQiG05v_p.88862_1388744696513_hackpad.com_Y38T9JXygI8_p.88862_1388674362841_System_Structure.bmp.png" alt=""></p>\n<p><img src="/static/img/misc/status-ball.gif" alt=""></p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_NcfzuQiG05v_p.88549_1388756487153_WEB_GUI .png" alt=""></p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_NcfzuQiG05v_p.88549_1388756494972_acc_plot.png" alt=""><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_NcfzuQiG05v_p.88549_1388756494991_angular_rate_plot.png" alt=""> </p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_NcfzuQiG05v_p.88862_1388843099366_123.bmp" alt=""></p>\n\n';return __p},this.JST["app/scripts/templates/project_proposal.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="-project-proposal-">期末專題-四軸飛行器(Project Proposal)</h1>\n<p><a href="http://wiki.csie.ncku.edu.tw/embedded/team2013-7">期末專題: Team #7</a>     </p>\n<h2 id="-">題目</h2>\n<ul>\n<li>四軸飛高高(Quadrotor)</li>\n</ul>\n<h2 id="-">預期目標</h2>\n<ul>\n<li>在四軸上面架設攝影機, 利用遙控器去命令空中的四軸拍照, 可將影像儲存到記憶卡</li>\n<li>達成懸停(原作者在github頁面說無法懸停)，可利用optical flow去做速度控制(達成懸停)</li>\n<li>利用FreeRTOS管理Task和Interrupt</li>\n<li>Auto-pilot的達成-必須有位置控制,<a href="/UVNdFqIV94d#地面站軟體設計">地面站軟體設計</a> </li>\n</ul>\n<h2 id="-">組員</h2>\n<ul>\n<li><a href="http://wiki.csie.ncku.edu.tw/User/fboris">fboris</a></li>\n<li><a href="http://wiki.csie.ncku.edu.tw/User/zxc2694">zxc2694</a></li>\n<li><a href="http://wiki.csie.ncku.edu.tw/User/poemking">poemking</a></li>\n<li><a href="http://wiki.csie.ncku.edu.tw/User/shengwen">shengwen</a>\n*</li>\n</ul>\n<h2 id="-budget-">預算(Budget)</h2>\n<p>王宏文同學提供的飛控板</p>\n<p>450mm 機架: 250</p>\n<p><a href="http://goods.ruten.com.tw/item/show?21208014903066"></a><a href="http://goods.ruten.com.tw/item/show?21208014903066">http://goods.ruten.com.tw/item/show?21208014903066</a></p>\n<p>2212 1000kv馬達: 200X4</p>\n<p><a href="http://goods.ruten.com.tw/item/show?21311204264602"></a><a href="http://goods.ruten.com.tw/item/show?21311204264602">http://goods.ruten.com.tw/item/show?21311204264602</a></p>\n<p>ZTW 40A 電子變速器: 270X4</p>\n<p><a href="http://goods.ruten.com.tw/item/show?21111110743710"></a><a href="http://goods.ruten.com.tw/item/show?21111110743710">http://goods.ruten.com.tw/item/show?21111110743710</a></p>\n<p>9047雙葉正反槳: 25X2 </p>\n<p><a href="http://goods.ruten.com.tw/item/show?21206132193224"></a><a href="http://goods.ruten.com.tw/item/show?21206132193224">http://goods.ruten.com.tw/item/show?21206132193224</a></p>\n<p><img src="https://fbcdn-sphotos-c-a.akamaihd.net/hphotos-ak-prn1/823456_682026185150133_732862103_o.jpg" alt=""></p>\n<p>電源分配板: $35</p>\n<p>螺絲包: $20</p>\n<p>電源開關:$16</p>\n<p>影像模組:275人民幣</p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_r4gGIYJMsRp_p.88549_1387523568296_淘寶影像模組收據.png" alt=""></p>\n<h2 id="-">討論和程式</h2>\n<p>github: <a href="https://github.com/fboris/QuadrotorFlightControl"></a><a href="https://github.com/fboris/QuadrotorFlightControl">https://github.com/fboris/QuadrotorFlightControl</a></p>\n<p>hackpad: <a href="https://embeddedcool.hackpad.com"></a><a href="https://embeddedcool.hackpad.com">https://embeddedcool.hackpad.com</a></p>\n<h2 id="-">參考資訊</h2>\n<p>王宏文同學飛控板相關資訊：<a href="https://github.com/Hom19910422/QCopterFlightControl/wiki"></a><a href="https://github.com/Hom19910422/QCopterFlightControl/wiki">https://github.com/Hom19910422/QCopterFlightControl/wiki</a></p>\n\n';return __p},this.JST["app/scripts/templates/record.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h1 id="-">實驗記錄</h1>\n<h2 id="1-12-">1/12決戰電機系館</h2>\n<ul>\n<li>1000-1200  訪談錄影</li>\n<li>1200-1330  場地佈置</li>\n<li>1300-1630  報告15min/team</li>\n<li>1630-1700  外面場地進行飛行</li>\n<li><p>1700--    獎項頒獎</p>\n</li>\n<li><p>[注意] 我跟老師改約早上11點30囉 ! 當天請大家 <strong>11點在航太系門口 </strong>一起過去嘿!!</p>\n</li>\n</ul>\n<h2 id="1-10">1/10</h2>\n<ul>\n<li><p>著手重新設計nrf傳送封包(一個封包32byte與nrf2401的單次傳送最大值相符)</p>\n<pre><code>*   設計完成，目前已經可以把shell和gui message共存:[github link](https://github.com/fboris/QuadcopterFlightControl/commit/c0597f66df089259ac77ac7f330d51bc4e8b319b) </code></pre>\n<ul>\n<li>控制板上nrf2401-&gt;nrf2401+STM32F4Discovery(轉USART)-&gt;電腦</li>\n</ul>\n</li>\n<li><p>承翰接手飛行，但是出現throttle跳動異常行為，尚未確認是飛行員的操作或者飛控板接收異常(wfly遙控器)</p>\n<pre><code>*   監看PWM input capture, pid output value行為正常</code></pre>\n</li>\n<li><p>飛行教學：於模擬飛行後實際飛行四軸,步驟為下,確認電源開始之後,init成功,此時遙控器一定要開啟以免程式錯誤造成誤飛動作,並把遙控器的安全開關打開(ch1~ch4輸入無法給任何動作)打開安全開關後,測試th roll &amp; pitch yaw所對應到的馬達必須要對,也就是飛行之前必須校正完全,在進行飛行動作,而四軸th到一定值後,不穩定系統的四軸馬上進行漂移,請即時作姿態的遙控器控制</p>\n</li>\n</ul>\n<h2 id="1-9">1/9</h2>\n<ul>\n<li>進一步完善reset指令,新增reset [parameter]</li>\n<li><p>鄭聖文:接手SD卡開發</p>\n<pre><code>*   -構想:建立兩檔,log, config(每次開機讀config的一些參數到系統,更改之歷史紀錄丟log)</code></pre>\n</li>\n<li><p>嘗試各種方法改善nrf速度，但是仍然無法達到xbee的水準</p>\n<pre><code>*   降低延遲時間</code></pre>\n<ul>\n<li>等待IRQ pin高電位</li>\n</ul>\n</li>\n</ul>\n<h2 id="1-8">1/8</h2>\n<ul>\n<li>status monitor中新增reset all指令(並模組化原status monitor架構)</li>\n<li>添加一些說明、授權相關文件</li>\n</ul>\n<h2 id="1-7">1/7</h2>\n<ul>\n<li>原本是用vTaskResume()跟vTaskSuspend()機制來啟動sdio, 但讀寫多次vTaskResume()會error無法進入stio_task(存檔大約5次以上會失敗),  改用 <a href="https://github.com/zxc2694/QuadrotorFlightControl/commit/7e0071149890bac8168b0abd44d657eb425f349f">xSemaphoreHandle</a> 機制來取代。現在sdsave讀寫多次已經都沒有問題了 。</li>\n</ul>\n<h2 id="1-6">1/6</h2>\n<ul>\n<li>新增功能:讓status monitor顯示尚未update的設定值</li>\n<li>預計新增:set reset一類指令來完善監視器的功能</li>\n<li>nrf通訊問題解決，但是nrf設計封包一次可以傳32byte，必須將原本的文字重新分割分批傳送</li>\n<li>sdsave問題仍未改善，有機會無法存檔</li>\n</ul>\n<h2 id="1-5">1/5</h2>\n<ul>\n<li>新增兩個指令sdinfo、sdsave在shell裡，一個用來顯示SD card訊息(記憶體大小)，一個用來儲存現在的姿態。</li>\n<li><p>已解決SD card只能讀一次的問題，現在可以連續讀取文件內容。但sdsave有bug，讀取時快時慢，甚至有時卡住。</p>\n</li>\n<li><p>用gdb觀察sdio_task行為如何?</p>\n</li>\n<li><p>沒問題囉 ! 今早已修復。\n*</p>\n</li>\n<li><p>nrf2401模組重新使用</p>\n<pre><code>*   github repo:[](https://github.com/fboris/QuadrotorGroundStation)https://github.com/fboris/QuadrotorGroundStation</code></pre>\n<ul>\n<li>已可以通過之前卡在nrf_check()並可以由飛控板發送訊息，由nrf2401+STM32F4Discovery的地面站轉成USART由電腦接收，目前雖然可以收到資料但是收到的資料都是空白的&#39;\\0&#39;</li>\n</ul>\n</li>\n<li><p>製作硬體蜂鳴器電路,為了避免四軸當電池電量過低,或是飛行狀態有危險的時候,</p>\n</li>\n<li><p>立刻發出Alarm聲響,告知目前狀態可能導致四軸失控,做降落防範機制</p>\n</li>\n<li><p>現在好像太小聲了...我們似乎把buzzer買成speaker</p>\n</li>\n<li><p><strong>ps指令目前停止使用，因為底層所呼叫的vTaskList() FreeRTOS已經不再維護是舊的函式</strong></p>\n</li>\n</ul>\n<h2 id="1-4">1/4</h2>\n<ul>\n<li>本日飛行測試</li>\n</ul>\n<p>*</p>\n<ul>\n<li>在FreeRTOS下執行</li>\n<li>因為利用USART回傳訊息給WEB GUI與Shell功能衝突，目前只能擇一</li>\n<li>可以實際運行status_report(GUI回報)，並可以即時的反應其參數</li>\n<li>shell只有在地面測試馬達，尚未起飛。根據Ming的說法是在我大量輸出monitor的資訊時會有一點不平衡的現象，不過在我接上示波器觀察flightcontrol task並沒有被延遲的情況</li>\n<li>發現濾波器問題，當飛行器接受控制向前指令受到明顯的加速度後，其姿態並不能正確的被算出，而是水平的狀態。這代表至少在AHRS部分計算有受到加速規的影響。</li>\n<li>讓Linenoise支持Ctrl + C熱鍵來捨棄一行指令</li>\n<li>讓Status monitor支持命令列的自動補齊功能</li>\n<li>[ <a href="https://embeddedcool.hackpad.com/NcfzuQiG05v">四軸飛高高海報專區</a> ]</li>\n</ul>\n<h2 id="1-3">1/3</h2>\n<ul>\n<li><p>修正monitor的結束後快速打上ps指令會導致系統崩潰,由gdb追蹤後發現,程式會卡在malloc的部份,經查閱了一些文件之後,推測是跟記憶體管理的策略有關</p>\n</li>\n<li><p>現象為:打了monitor進入monitor再打quit出來monitor，此時所有command都會失效</p>\n</li>\n<li>而ps曾經在一開機打直接讓系統當機</li>\n</ul>\n<p>參考:<a href="http://mcuos.com/viewthread.php?action=printable&amp;tid=45"></a><a href="http://mcuos.com/viewthread.php?action=printable&amp;tid=45"><a href="http://mcuos.com/viewthread.php?action=printable&amp;tid=45">http://mcuos.com/viewthread.php?action=printable&amp;tid=45</a></a></p>\n<ul>\n<li><a href="http://www.amobbs.com/thread-5545257-1-1.html"></a><a href="http://www.amobbs.com/thread-5545257-1-1.html"><a href="http://www.amobbs.com/thread-5545257-1-1.html">http://www.amobbs.com/thread-5545257-1-1.html</a></a></li>\n<li><a href="http://stackoverflow.com/questions/18355914/freertos-allocation-error"></a><a href="http://stackoverflow.com/questions/18355914/freertos-allocation-error"><a href="http://stackoverflow.com/questions/18355914/freertos-allocation-error">http://stackoverflow.com/questions/18355914/freertos-allocation-error</a></a></li>\n</ul>\n<p>&quot;This was probably caused by fragmentation in <strong>heap_2.c</strong>. Even though the allocations were pretty small, the behaviour was consistent. Using <strong>heap_4.c</strong> solved it.&quot;</p>\n<ul>\n<li><p>Good point! You can track the lifecycle of the allocated objects.</p>\n</li>\n<li><p>在shell task</p>\n</li>\n</ul>\n<h2 id="1-2">1/2</h2>\n<ul>\n<li><p>Web GUI Plot已初步完成</p>\n<pre><code>*   [](https://github.com/chilijung/flight-plot)https://github.com/chilijung/flight-plot</code></pre>\n</li>\n<li><p>修正Linenoise歷史紀錄不常操作導致系統崩潰問題</p>\n</li>\n<li><p>系統架構圖(第二版)</p>\n</li>\n</ul>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_Y38T9JXygI8_p.88862_1388674362841_System_Structure.bmp" alt=""></p>\n<h2 id="1-1-">1/1 新年快樂!</h2>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_Y38T9JXygI8_p.88575_1388511573739_螢幕擷圖存為 2014-01-01 01:38:36.png" alt=""></p>\n<ul>\n<li>Shell現在支持:<strong>clear</strong>、<strong>help</strong>、<strong>monitor</strong>(未完)、<strong>ps</strong>四個指令</li>\n<li><p>QuadCopter Status Monitor界面大致設計完畢</p>\n<p>  新增set指令:set pitch.kp 50.5 (並加入警示功能)</p>\n</li>\n<li><p>在飛控正在執行的時候通常kp和kd都會一起改，而且通常Roll與Pitch的kp及kd都會改，建議在設定後可以自己決定如何生效(讓操作者有時間反應)</p>\n</li>\n<li><p>上述已完成</p>\n</li>\n<li><p>QuadCopter Status monitor指令</p>\n<p> resume(關閉命令列,回到狀態回報模式)</p>\n</li>\n<li><p>help(說明)</p>\n</li>\n<li>quit(離開程式)</li>\n<li>set(設定) - set [parameter] [value]來設定新的值到緩衝區 / set update 啟用新的設定值</li>\n</ul>\n<p><strong>QuadCopter TODO:</strong></p>\n<ul>\n<li><p>將更改過但未生效的設定值秀出來</p>\n</li>\n<li><p><strong>Bug</strong></p>\n</li>\n</ul>\n<p>shell一直按enter會crash，停在vPortMalloc中，並且原本的flight control會無法正確排程。</p>\n<ul>\n<li>1/2修正</li>\n</ul>\n<p>加入sdio task會讓roll  及 pitch無法控制，疑似與昨天發現的printf  bug類似。</p>\n<ul>\n<li>如果只有單一個sdio_task 是可以成功執行寫入文字檔，數個task，會互相影響而崩潰。</li>\n<li>應該是有資源沒有保護到,應加入semaphore or mutex</li>\n</ul>\n<h2 id="12-31">12/31</h2>\n<ul>\n<li><p>各位請補充一下有什麼需要測試</p>\n</li>\n<li><p>問題:Shell 如何與<a href="https://www.facebook.com/lirong.ji">紀力榮</a>的Web GUI共存？</p>\n</li>\n<li>因為時間關係，影像部分可能來不及了，本來SD卡要用來儲存影像，現在希望SD卡改成拿來儲存PID控制的數據變化。</li>\n<li>已將sdio相關程式(<a href="https://github.com/zxc2694/QuadrotorFlightControl/commits/master">連結</a>)移進我們的專案裡。</li>\n<li>新增help指令。</li>\n</ul>\n<h2 id="12-30">12/30</h2>\n<ul>\n<li>改寫命令解析器,使其成為一個模組、可重複利用(新增group概念)</li>\n<li>獨立出Quadcopter Status Monitor相關程式碼</li>\n<li><p>Bug:</p>\n<pre><code>*   printf在statusreport_task中如果呼叫第二次printf，會讓AngE的值變成0x40000，但是如果printf只有呼叫一次並沒有這問題。[github commit](https://github.com/fboris/QuadrotorFlightControl/commit/5a85da4391a3311c0b847484a0f58567ff63e342) </code></pre>\n</li>\n<li><p>我們所參考的影像專案，<a href="https://github.com/zxc2694/DCMI_OV7670/tree/test_makefile">makefile</a>寫好了，但是原作<strong>漏掉非常多的檔案</strong>，像是 <u><a href="https://github.com/zxc2694/DCMI_OV7670/blob/test_makefile/Libraries/STM3240_EVAL/stm324xg_eval_lcd.c">stm324xg_eval_lcd.c</a> 、</u><a href="https://github.com/zxc2694/DCMI_OV7670/blob/test_makefile/Libraries/STM3240_EVAL/stm324xg_eval.c">stm324xg_eval.c</a>等等，雖然已全補上，但是有些.h檔是他自己寫的，卻沒有放上來，以至於SCL_High、SDA_Low、SDA_High等等，這些副涵式完全讀不到，一堆無解的error。</p>\n</li>\n<li><p>先暫時別動這邊了</p>\n</li>\n</ul>\n<h2 id="12-29">12/29</h2>\n<ul>\n<li><p>感謝新夥伴<a href="https://www.facebook.com/lirong.ji">紀力榮</a>加入四軸飛高高，幫忙用Web UI 設計好用的監控界面。</p>\n</li>\n<li><p>建議繼續發展Shell,畢竟有些參數還是透過命令列調整較為容易</p>\n</li>\n<li><p>新增影像模組專案[<a href="https://github.com/zxc2694/DCMI_OV7670">DCMI_OV7670</a>]，目前還無法測試，初步觀察程式碼認為是可行的。(<a href="http://www.61ic.com/code/viewthread.php?tid=606048">參考出處</a>)</p>\n</li>\n<li><a href="https://github.com/poemking/stm32_sdio">stm32_sdio</a>(SD卡)與<a href="https://github.com/zxc2694/DCMI_OV7670">DCMI_OV7670</a>專案的<strong>Libraries</strong>(2013.1)一致，方便日後合併。</li>\n</ul>\n<h2 id="12-27">12/27</h2>\n<ul>\n<li><p>飛行<strong>模擬器測試成功</strong>,在飛行四軸實體機前,需先使用遙控器的模擬軟體進行飛行</p>\n<p> 我們使用的是AERO fly這套軟體,遙控器使用5CH來進行控制:</p>\n<p> 左邊2CH的十字鈕各為[上下ELVE(<strong>pitch</strong>) 左右RUDD<strong>(yaw</strong>)]</p>\n</li>\n<li><p>右邊2CH的十字鈕各為[上下THRO 左右AILE(<strong>roll</strong>) ]</p>\n</li>\n<li><p>1CH為搖控電源開關,四軸在飛行危險時的保護開關</p>\n</li>\n<li><p>完成移植命令解析器,Shell移植成功,準備開始撰寫週邊指令</p>\n</li>\n<li><p>1.status可以先參考我之前狀態回報需要顯示的訊息</p>\n</li>\n<li>2.新增set pid可以調整on-line調整pid參數，並在調整的時候可以看目前的重要訊息(例如status所顯示的)，我的想法是在開啟pid  tuning的時候建立一個task去更新pid參數，然後退出會自己把task刪除</li>\n<li>可以 suspend 一個 FreeRTOS task，若 task 只做 PID 參數調整那平常就保持 suspend/idle 狀態即可\n<ul style="list-style: none;"><li>\n</li></ul style="list-style: none;"></li>\n</ul>\n<h2 id="12-26">12/26</h2>\n<ul>\n<li><p>USART同步問題解決,<strong>linenoise測試成功</strong>,開始移植命令解析器</p>\n</li>\n<li><p><a href="https://github.com/fboris/QuadrotorFlightControl/commit/3ae7737f1fa8a528e5bc4501ed9d7671dd47b02a">github commit</a> </p>\n</li>\n<li><p><strong>命令列構想</strong>:</p>\n</li>\n<li><p>status指令進入狀態回報程式,以ctrl + c 中斷                   </p>\n</li>\n<li>set指令設定某些四軸的環境變數</li>\n<li>info指令顯示一些四軸的環境變數</li>\n<li>提案:用command來拍照、儲存一些資料到SD卡</li>\n<li><p>online tuning PID parameter</p>\n</li>\n<li><p>在FreeRTOS分支裡的QCopter.c中有需多條件式編譯，建議集中到同個檔案管理(類似FreeRTOSConfig.h)</p>\n</li>\n<li>建立一個自動測試可以測試shell environment 會不會崩潰</li>\n<li>必須測試FreeRTOS是否正確排程Flight Control</li>\n<li>影像專案CAMERA_Capture 可能無法使用，因為此專案的影像傳輸是用<strong>I2C</strong>的方式，但是王同學的QCopterMV開發板，並沒有拉出I2C的線，必須配合他的板子用<strong>camera interface</strong>的傳輸方式，所以需要尋找其他的專案。(ST有提供camera interface的LIB，但是他的模組是OV2640，跟我們不太一樣，不確定會不會有問題！)</li>\n</ul>\n<h2 id="12-25">12/25</h2>\n<p>今日進度</p>\n<ul>\n<li>很幸運的實驗室剛好有一顆可以傳輸8bit的<strong>影像模組</strong>（<a href="http://goods.ruten.com.tw/item/show?21306136604079">OV7670</a>）所以直接它拿來使用，從<a href="https://embeddedcool.hackpad.com/OV7670-CMOS-HdKevEgZfSA">OV7670的layout圖</a> 可以看出與<a href="https://github.com/Hom19910422/QCopterMachineVision">QCopteMV開發版</a>接腳是完全配對的，可以直接插入。</li>\n<li>在github新增了新專案<strong><a href="https://github.com/zxc2694/CAMERA_Capture">CAMERA_Capture</a></strong>，此專案目前還沒有makefile。</li>\n<li>由於Ming說要飛四軸之前，要先練習過遙控器的<strong>模擬器</strong>，這樣之後控制飛機比較安全，所以到了祥大模型店買了模擬軟體以及遙控器（之前都是借用航太系的遙控器），不過遙控器裡面的設定很複雜，因為他都是給定翼機在飛的，而我們是旋翼機，目前調它的姿態控制有點問題。</li>\n<li>遇到了FreeRTOS與<strong>中斷處理</strong>的問題[<a href="https://embeddedcool.hackpad.com/STM32F4FreeRTOS-b5vnsVtmVuw">詳細狀況</a>]。昨天遇到的問題是聖文的USART中斷不能正確的進入，問題一開始以為是NVIC沒設定Preemption Piority的問題，後來發現是NVIC的Preemption Piority必須要設定成小於configMAX_SYSCALL_INTERRUPT_PRIORITY才能在中斷中正確的呼叫xxFromISR的的API</li>\n</ul>\n<h2 id="12-24">12/24</h2>\n<p>今日進度                              </p>\n<ul>\n<li>影像處理模組出了點問題，我們買到的是跟王同學不合的接腳，他的影像模組是用<strong>8bit</strong>在傳輸影像的，我們不小心買到用<strong>10bit</strong>傳輸的模組，本來打算乾脆用stm32f4那塊版子，直接接10bit影像模組，但又發現執行SD卡很不方便，最後還是決定重買一個影像模組，繼續使用王同學的<a href="https://github.com/Hom19910422/QCopterMachineVision">QCopteMV開發版</a> ，所以PX4的程式碼暫時不能使用了。</li>\n</ul>\n<h2 id="12-23">12/23</h2>\n<p>今日進度</p>\n<ul>\n<li>測試SD卡成功[<a href="https://github.com/poemking/stm32_sdio">連結</a> ]，SDIO經由原模組透過st link可以成功抓到micro SD卡的存取容量及內容，按下key後會把資料寫入sd卡，最後把sd卡透過讀卡機可讀出txt file。</li>\n<li>參考PX4的影像模組<a href="https://github.com/zxc2694/Flow/blob/master/src/mt9v034.c">程式碼mt9v034.c</a> ，並改成我們所需要的全域變數[<a href="https://github.com/zxc2694/QuadrotorFlightControl/commit/de8f5cc28077c78f265528688c23277f090eae4f">連結</a>]，目前可以正確make。 </li>\n<li>補充：[<a href="https://embeddedcool.hackpad.com/Sublime--BPlyxVOT8mm">Sublime教學</a> ], 此軟體可以讓開發者更加容易追蹤程式碼。</li>\n<li>濾波器部份要先完成可以視覺化顯示波形的方法(python matplot)，和利用周明哲同學提供的適用於四軸飛行器上的 Complemtary Filter改善。 </li>\n</ul>\n<h2 id="12-22">12/22</h2>\n<p>Shell移植分成三部:</p>\n<ul>\n<li>移植標準C函數(Freestanding) - string.c , memory相關函數。 </li>\n<li>Linenoise interface。 </li>\n<li>命令解析器</li>\n</ul>\n<p>已完成一、二項,並發現USART因為FreeRTOS關係有同步問題待解決</p>\n<ul>\n<li>這部份我也在PWM Input Capture中斷的地方遇到，不清楚要用怎樣的流程呼叫才算安全的處理中斷</li>\n</ul>\n<h2 id="12-21">12/21</h2>\n<p>*</p>\n<ul>\n<li>在較大的環境試飛成功，解決overflow的問題以及發現之前調的PID參數太大(因為之前飛行overflow的問題)，最後測試出來的pid參數跟原作者王文宏的非常相似</li>\n<li>We use PID to control three posture roll pitch yaw , turning  PID parameter a moment, finally plant already stable state.However we have some problem, for example change moving-average filter to complementary filter in order to erase input noise.</li>\n<li>we can use linenoise to standalone quadrotor in the future. </li>\n<li><p>測試四軸的PID控制 :</p>\n<p> <a href="http://www.youtube.com/watch?v=45PlQ4KLEqU&amp;feature=youtu.be"></a><a href="http://www.youtube.com/watch?v=45PlQ4KLEqU&amp;feature=youtu.be"><a href="http://www.youtube.com/watch?v=45PlQ4KLEqU&amp;feature=youtu.be">http://www.youtube.com/watch?v=45PlQ4KLEqU&amp;feature=youtu.be</a></a></p>\n</li>\n<li><p>USB 的報告組別已經提供整理好的 fatfs 程式碼，可參考: <a href="http://wiki.csie.ncku.edu.tw/embedded/USB"></a><a href="http://wiki.csie.ncku.edu.tw/embedded/USB">http://wiki.csie.ncku.edu.tw/embedded/USB</a></p>\n</li>\n<li>回覆Jserv : usb組的程式我們看過了,  他的寫法跟王同學寫的幾乎差不多,  所以我們拿他的來測試的，謝謝Jserv提供︿︿</li>\n<li>應該說fatfs都是用同個lib，新舊版的差異而已，之後可能可以整合看看</li>\n</ul>\n<p>**   12/20</p>\n<h2 id="-"> </h2>\n<p>*12/</p>\n<ul>\n<li><strong>日進度</strong></li>\n<li>遇到PWM CCR被設成負值出現overf</li>\n<li>遙控器會自行關機閃紅燈-&gt;目前找不到問題。</li>\n<li>在開啟<a href="https://embeddedcool.hackpad.com/python-python-GW5aXW19xC6">safety switchh的情況下</a>馬達持續運轉。-&gt;目前也是找不到問</li>\n<li>利用 python se</li>\n<li>完成移植FreeRTOS</li>\n</ul>\n<h2 id="-"> </h2>\n<p>*12/</p>\n<ul>\n<li><p>日進度</p>\n</li>\n<li><p>購買飛控板SDIO用於影像資料儲存要用的micro SD卡+擴充片,將以9條杜邦</p>\n</li>\n</ul>\n<p>*原本 rol</p>\n<ul>\n<li>前分支狀態：</li>\n<li>master:如果pid參數設成50，開機時會有油門(Throttle)設成最大</li>\n</ul>\n<h2 id="-"> </h2>\n<p>*12/</p>\n<ul>\n<li><p>日進度</p>\n</li>\n<li><p>將串列傳輸的讀取與寫入改成呼叫serial.putch（）與serial.getch（）函式, 讓程式碼看起來更加直觀, 並且增加puts功能，給printf使用, 而今天puts有點卡住, 利用make openo</p>\n</li>\n</ul>\n<p><a href="http://www.ciselant.de/projects/gcc_printf/gcc_printf.html"></a></p>\n<h2 id="-"> </h2>\n<p>*12/</p>\n<ul>\n<li>日進度</li>\n<li>初步測試成功，需要再調整PI</li>\n</ul>\n<p>*</p>\n<h2 id="-"> </h2>\n<p>*12/</p>\n<ul>\n<li>日進度</li>\n</ul>\n<h2 id="-"> </h2>\n<p>*12/</p>\n<ul>\n<li>日進度</li>\n</ul>\n<p>*啟動時如果有遙控器傳</p>\n<ul>\n<li>commit1為例:</li>\n<li><p>else if(current[2] &lt; PWM5_PreviousValue)</p>\n</li>\n<li><p>PWM5_InputCaptureValue = 0xFFFFFFFF - PWM5_PreviousVal<strong>ue + current[2] ; </strong></p>\n</li>\n</ul>\n<p>*</p>\n<h2 id="-"> </h2>\n<p>*12/</p>\n<ul>\n<li>日進度</li>\n</ul>\n<h2 id="-"> </h2>\n<p>*12/</p>\n<ul>\n<li>日進度</li>\n</ul>\n<p>*嘗試使用STM32F4Discovery去使用nRF</p>\n<ul>\n<li>是換飛控板後又可以通過，似乎是硬體問題必須再進行確認</li>\n<li>nrF_Check為經由spi寫入資料到RF Module的暫存器,再從該暫存器讀值比較是否相同</li>\n<li>如果你們SPI在Discovery上面有問題但是線路又確定無誤的話，嘗試將SPI Clock放慢，用</li>\n</ul>\n<p>*</p>\n<p><img src="https://hackpad-attachments.s3.amazonaws.com/hackpad.com_Y38T9JXygI8_p.88862_1386918044552_1461140_689850664367685_1838297370_n.jpg" alt=""></p>\n<h2 id="-"> </h2>\n<p>*12/</p>\n<ul>\n<li>日進度</li>\n<li>完成支援浮點數</li>\n<li>讓全域變數為一個結構</li>\n<li>修改一些程式碼的設計\n<ul style="list-style: none;"><li>新增地站(放置電腦旁)：主要用來調<a href="https://github.com/zxc2694/QuadrotorGroundStation">參數，利用RF模組與四軸傳輸。</a></li>\n<li>\n</li></ul style="list-style: none;"></li>\n</ul>\n<h2 id="-"> </h2>\n<p>*12/</p>\n<ul>\n<li>日進<a href="https://embeddedcool.hackpad.com/nRF24L01-9tVeioOBKG7">度</a></li>\n</ul>\n<h2 id="-"> </h2>\n<p>*12/</p>\n<ul>\n<li>日進度</li>\n</ul>\n<h2 id="-"> </h2>\n<p>*12/</p>\n<ul>\n<li>日進度</li>\n<li>購買了st-link燒路器，使得linux系統下能夠燒錄飛控板。</li>\n<li>停止最佳化功能(gcc -02)，才能正確執行makefile<a href="https://github.com/fboris/QuadrotorFlightControl/commit/b0c542dbd446c348a490b7d2cb1e65a1dd29990b">，應</a>該</li>\n</ul>\n<h2 id="-"> </h2>\n<p>*12/</p>\n<ul>\n<li><p>日進度</p>\n</li>\n<li><p>重新layout第二版本的7805穩壓電路，因為第一版</p>\n</li>\n<li><p>尚未測試利用分壓電路得到最高3.3V以用來量測電池電壓</p>\n</li>\n</ul>\n<h2 id="-"> </h2>\n<p>*12/</p>\n<ul>\n<li>日進度</li>\n<li>經過Jserv大神的修改後，已經可以成功的使用Makefile編譯出檔案，尚</li>\n</ul>\n<h2 id="-"> </h2>\n<p>*</p>\n<h2 id="-"> </h2>\n<p>*</p>\n<h2 id="-"> </h2>\n<p><ul style="list-style: none;"><li>\n</li></ul style="list-style: none;"></p>\n<h2 id="-"> </h2>\n<p><ul style="list-style: none;"><li>\n</li></ul style="list-style: none;"></p>\n<h2 id="-"> </h2>\n<p>*</p>\n<p>*多個PWM(max=4)可使用同組TIMER</p>\n<ul>\n<li><a href="http://www.360doc.com/content/11/0917/23/7736891_149118340.shtml">而TIMER &amp; PWM的使用可參考</a></li>\n<li><a href="http://www.360doc.com/content/11/0917/23/7736891_149119361.shtml">STM32 TIM輸出比較的三種</a>模式</li>\n<li><a href="http://www.360doc.com/content/11/0919/13/7736891_149463961.shtml">STM32 TIM計時器輸出比較 //</a></li>\n<li><p><a href="http://www.360doc.com/content/11/0917/23/7736891_149119727.shtml">STM32通用計時器TIM2-</a></p>\n</li>\n<li><p>STM32 TIM的PMW模式</p>\n</li>\n</ul>\n<h2 id="-"> </h2>\n<ul>\n<li><p><strong>11/27</strong></p>\n<pre><code>*   **今日進度**</code></pre>\n<ul>\n<li><strong>機架組裝</strong></li>\n<li><strong> 電子變速器與無刷馬</strong></li>\n</ul>\n</li>\n<li><p>測試及決定馬達轉向</p>\n</li>\n<li>螺旋槳的方向有分，較高的那邊為旋轉的方向(順或逆時針)</li>\n<li>因為上述原因，馬達轉向要配合螺旋槳的方向。測試成功時會有向下吹的風</li>\n<li>馬達雖然有三條線，但是那三條線並不是固定的配置，必須要經過測試去測其轉向。如果不是我們預期的轉向可以直接將某兩條線對調接上電子變速</li>\n</ul>\n<p>*</p>\n<p>*電子變速器 (Electronic Speed Control)</p>\n\n';return __p},this.JST}),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("views/home",["jquery","underscore","backbone","templates"],function(a,c,d,e){var f,g;return f=function(c){function d(){return g=d.__super__.constructor.apply(this,arguments)}return b(d,c),d.prototype.el="#main-context",d.prototype.template=e["app/scripts/templates/intro.ejs"],d.prototype.render=function(){return a(this.el).html(this.template())},d}(d.View)})}.call(this),function(){"use strict";require.config({shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},bootstrap:{deps:["jquery"],exports:"jquery"}},paths:{jquery:"../bower_components/jquery/jquery",backbone:"../bower_components/backbone/backbone",underscore:"../bower_components/underscore/underscore",bootstrap:"../bower_components/sass-bootstrap/dist/js/bootstrap"}}),require(["backbone","views/home"],function(a,b){var c;return a.history.start(),c=new b,c.render()})}.call(this),define("main",function(){})}();